(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(e,t,o){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),r=[];function l(e){for(var t=-1,o=0;o<r.length;o++)if(r[o].identifier===e){t=o;break}return t}function s(e,t){for(var o={},i=[],n=0;n<e.length;n++){var a=e[n],s=t.base?a[0]+t.base:a[0],d=o[s]||0,c="".concat(s," ").concat(d);o[s]=d+1;var u=l(c),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(p)):r.push({identifier:c,updater:g(p,t),references:1}),i.push(c)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=o.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,o,i){var n=o?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var a=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function m(e,t,o){var i=o.css,n=o.media,a=o.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,f=0;function g(e,t){var o,i,n;if(t.singleton){var a=f++;o=v||(v=d(t)),i=p.bind(null,o,a,!1),n=p.bind(null,o,a,!0)}else o=d(t),i=m.bind(null,o,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var o=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<o.length;i++){var n=l(o[i]);r[n].references--}for(var a=s(e,t),d=0;d<o.length;d++){var c=l(o[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}o=a}}}},function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var n=(r=i,l=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),a=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[o].concat(a).concat([n]).join("\n")}var r,l,s;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(n[r]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);i&&n[s[0]]||(o&&(s[2]?s[2]="".concat(o," and ").concat(s[2]):s[2]=o),t.push(s))}},t}},function(e,t,o){switch(window.__kbnThemeTag__){case"v7dark":return o(35);case"v7light":return o(37);case"v8dark":return o(39);case"v8light":return o(41)}},function(e,t,o){var i=o(32),n=o(36);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(38);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(40);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(42);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){switch(window.__kbnThemeTag__){case"v7dark":return o(44);case"v7light":return o(46);case"v8dark":return o(48);case"v8light":return o(50)}},function(e,t,o){var i=o(32),n=o(45);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(47);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(49);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var i=o(32),n=o(51);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var a={insert:"head",singleton:!1};i(n,a);e.exports=n.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){"use strict";o.r(t);var i=o(13),n=o.n(i),a=o(9),r=o.n(a),l=o(4),s=o(29),d=o(8),c=o(6),u=o(2);const p="__complexSplitAccessor__",m=(e,t)=>`${e}${void 0!==t?`::${t}`:""}`,v=e=>e===u.BUCKET_TYPES.DATE_RANGE||e===u.BUCKET_TYPES.RANGE||e===u.BUCKET_TYPES.IP_RANGE,f=(e,t=!1)=>(o,i)=>{if(!o.accessor||"shard_delay"===o.aggType)return;if(!t&&!v(o.aggType)||!o.formatter)return o.accessor;const n=o.formatter,a=o.accessor,r=e=>{const t=e[a];if(void 0===t)return;return n(t)};return r.fieldName=m(e,i),r},g=e=>{const t=new Map;return e.forEach(((e,o)=>{if("function"==typeof e){const i=m(p,o);t.set(i,e)}})),t};var h=o(7);const b=e=>{switch(e){case"cardinal":return l.CurveType.CURVE_MONOTONE_X;case"step-after":return l.CurveType.CURVE_STEP_AFTER;case"linear":default:return l.CurveType.LINEAR}};var x=o(22),y=o.n(x),w=o(10);var T=o(0),j=o(14);const _=(e,t,o,i)=>({series:[n]})=>{const[r,l]=Object(a.useState)(!1),[s,d]=Object(a.useState)(!1),c=n,u=Object(a.useMemo)((()=>t(c)),[c]);if(Object(a.useEffect)((()=>{(async()=>{d(await e(u))})()}),[u]),!s||!u)return null;const p=i(c),m=[{id:"main",title:`${p}`,items:[{name:T.i18n.translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${p}-filterIn`,icon:Object(h.jsx)(j.EuiIcon,{type:"plusInCircle",size:"m"}),onClick:()=>{l(!1),o(u)}},{name:T.i18n.translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${p}-filterOut`,icon:Object(h.jsx)(j.EuiIcon,{type:"minusInCircle",size:"m"}),onClick:()=>{l(!1),o(u,!0)}}]}],v=Object(h.jsx)("div",{tabIndex:0,role:"button","aria-pressed":"false",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":`legend-${p}`,onKeyPress:()=>l(!r),onClick:()=>l(!r)},Object(h.jsx)(j.EuiIcon,{size:"s",type:"boxesVertical"}));return Object(h.jsx)(j.EuiPopover,{id:"contextMenuNormal",button:v,isOpen:r,closePopover:()=>l(!1),panelPaddingSize:"none",anchorPosition:"upLeft",title:T.i18n.translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:p}})},Object(h.jsx)(j.EuiContextMenu,{initialPanelId:"main",panels:m}))};function C(e){switch(e){case l.Position.Bottom:return"upCenter";case l.Position.Top:return"downCenter";case l.Position.Left:return"rightCenter";default:return"leftCenter"}}const O=({id:e,title:t,show:o,position:i,groupId:n,grid:a,ticks:r,domain:s,style:d,integersOnly:c})=>Object(h.jsx)(l.Axis,{id:`${e}__axis`,groupId:n,hide:!o,title:t,style:d,domain:s,position:i,integersOnly:c,showGridLines:null==a?void 0:a.show,tickFormat:null==r?void 0:r.formatter,labelFormat:null==r?void 0:r.labelFormatter,showOverlappingLabels:null==r?void 0:r.showOverlappingLabels,showDuplicatedTicks:null==r?void 0:r.showDuplicates}),k=({enabled:e,isDarkMode:t,isFullBin:o,hideTooltips:i,domain:n,adjustedDomain:a})=>e&&n&&a&&"min"in n&&"max"in n&&void 0!==n.minInterval&&"min"in a&&"max"in a?Object(h.jsx)(d.Endzones,{isFullBin:o,isDarkMode:t,domainStart:n.min,domainEnd:n.max,interval:n.minInterval,domainMin:a.min,domainMax:a.max,hideTooltips:i}):null,S=({enabled:e,isDarkMode:t,domain:o})=>{if(!e)return null;const i=o&&"max"in o?o.max:void 0;return Object(h.jsx)(d.CurrentTime,{isDarkMode:t,domainEnd:i})};const A=({markSizeRatio:e,rotation:t,enableHistogramMode:o,tooltip:i,isTimeChart:n,xAxis:a,orderBucketsBySum:r,xDomain:s,adjustedXDomain:c,showLegend:u,onElementClick:p,onPointerUpdate:m,onBrushEnd:v,onRenderChange:f,legendAction:g,legendColorPicker:b,legendPosition:x,maxLegendLines:y,truncateLegend:T})=>{var j,_,C,O,k,S,A;const E=Object(w.e)(),L=E.useChartsTheme(),M=E.useChartsBaseTheme(),P={markSizeRatio:e,sharedStyle:{unhighlighted:{opacity:Object(w.g)().get("visualization:dimmingOpacity")}},barSeriesStyle:{...{displayValue:{fontSize:{min:10,max:12},alignment:{horizontal:l.HorizontalAlignment.Center,vertical:l.VerticalAlignment.Middle}}}},legend:{labelOptions:{maxLines:T?null!=y?y:1:0}},axes:{axisTitle:{padding:{outer:10}}},chartMargins:x===l.Position.Top||x===l.Position.Right?{bottom:(null!==(j=null===(_=L.chartMargins)||void 0===_?void 0:_.bottom)&&void 0!==j?j:0)+10}:{right:(null!==(C=null===(O=L.chartMargins)||void 0===O?void 0:O.right)&&void 0!==C?C:0)+10}},D=null!==(k=a.ticks)&&void 0!==k&&k.formatter?e=>{var t,o,i;return null!==(t=null===(o=a.ticks)||void 0===o||null===(i=o.formatter)||void 0===i?void 0:i.call(o,e))&&void 0!==t?t:""}:void 0,I=n&&s&&c?Object(d.renderEndzoneTooltip)(s.minInterval,"min"in s?s.min:void 0,"max"in s?s.max:void 0,D,!i.detailedTooltip):D&&(i.detailedTooltip?void 0:({value:e})=>D(e)),R=null!==(S=document.getElementById("app-fixed-viewport"))&&void 0!==S?S:void 0,z=i.detailedTooltip?{...i,boundary:R,customTooltip:i.detailedTooltip(I),headerFormatter:void 0}:{...i,boundary:R,headerFormatter:I};return Object(h.jsx)(l.Settings,{debugState:null!==(A=window._echDebugStateFlag)&&void 0!==A&&A,onPointerUpdate:m,xDomain:c,rotation:t,theme:[P,L],baseTheme:M,showLegend:u,legendPosition:x,allowBrushingLastHistogramBin:n,roundHistogramBrushValues:o&&!n,legendColorPicker:b,onElementClick:p,onBrushEnd:v,onRenderChange:f,legendAction:g,tooltip:z,orderOrdinalBinsBy:r?{direction:l.Direction.Descending}:void 0})},E=({show:e,value:t,color:o,width:i,groupId:n,dash:a})=>e?Object(h.jsx)(l.LineAnnotation,{id:"__threshold_line__",groupId:n,domainType:l.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{stroke:o,strokeWidth:null!=i?i:2,opacity:1,dash:a}}}):null;var L=o(1);function M({style:e,...t},o,i){var n;const a=null===(n=o.find((({id:e})=>i.some((({valueAxis:t})=>e===t)))))||void 0===n?void 0:n.groupId;return{...t,dash:P(e),groupId:a}}function P(e){switch(e){case L.f.Dashed:return[10,5];case L.f.DotDashed:return[20,5,5,5];case L.f.Full:default:return}}function D({position:e}){return"left"===e||"right"===e?90:0}o(34);const I=({label:e,value:t},o)=>e&&t?Object(h.jsx)("tr",{key:e+t+o},Object(h.jsx)("td",{className:"detailedTooltip__label"},Object(h.jsx)("div",{className:"detailedTooltip__labelContainer"},e)),Object(h.jsx)("td",{className:"detailedTooltip__value"},Object(h.jsx)("div",{className:"detailedTooltip__valueContainer"},t))):null,R=e=>t=>function({header:o,values:i}){const n=i.find((({isHighlighted:e})=>e));if(!n)return null;const a=((e,t,o)=>{var i;const n=[];if(t){const o=v(e.x.aggType)?null:e.x.formatter;n.push({label:e.x.title,value:o?o(t.value):`${t.value}`})}const a=o.seriesIdentifier,r=null!==(i=e.y.find((({accessor:e})=>e===a.yAccessor)))&&void 0!==i?i:null;return r&&n.push({label:r.title,value:r.formatter?r.formatter(o.value):`${o.value}`}),e.z&&!Object(s.isNil)(o.markValue)&&n.push({label:e.z.title,value:e.z.formatter?e.z.formatter(o.markValue):`${o.markValue}`}),a.splitAccessors.forEach(((t,o)=>{var i;const a=(null!==(i=e.series)&&void 0!==i?i:[]).find((({accessor:e},t)=>e===o||o===`__complexSplitAccessor__::${t}`));a&&n.push({label:null==a?void 0:a.title,value:null!=a&&a.formatter&&!o.toString().startsWith(p)?null==a?void 0:a.formatter(t):`${t}`})})),e.splitColumn&&void 0!==a.smHorizontalAccessorValue&&void 0!==a.smHorizontalAccessorValue&&n.push({label:e.splitColumn.title,value:`${a.smHorizontalAccessorValue}`}),e.splitRow&&void 0!==a.smVerticalAccessorValue&&void 0!==a.smVerticalAccessorValue&&n.push({label:e.splitRow.title,value:`${a.smVerticalAccessorValue}`}),n})(e,o,n);return 0===a.length?null:Object(h.jsx)("div",{className:"detailedTooltip"},t&&o&&Object(h.jsx)("div",{className:"detailedTooltip__header"},t(o)),Object(h.jsx)("table",null,Object(h.jsx)("tbody",null,a.map(I))))};function z({addLegend:e,legendPosition:t}){return{show:e,position:t}}function B({type:e,title:t,labels:o,scale:i,...n},{categoryLines:a,valueAxis:r},{params:l,format:c,formatter:p,title:m="",aggType:v},f,g=!1){const h=e===L.b.Category,b=(h||f.some((({valueAxis:e})=>e===n.id)))&&n.show,x=n.id,y=h?{show:a}:{show:r===n.id},w=v===u.BUCKET_TYPES.DATE_RANGE||v===u.BUCKET_TYPES.RANGE?s.identity:p,T={formatter:w,labelFormatter:V(o.truncate,w),show:o.show,rotation:o.rotate,showOverlappingLabels:!o.filter,showDuplicates:!o.filter},j=function(e,t,o,i){var n;const a=i?N(e,"number"===(null==o?void 0:o.id)||"number"===(null==o||null===(n=o.params)||void 0===n?void 0:n.id)&&(null==o?void 0:o.id)!==u.BUCKET_TYPES.RANGE&&(null==o?void 0:o.id)!==u.BUCKET_TYPES.TERMS,"date"in t,"interval"in t):N(e,!0);return{...e,type:a}}(i,l,c,h),_=t.text||m,C=h&&g?d.LabelRotation.Horizontal:d.LabelRotation.Vertical;return{...n,show:b,groupId:x,title:_,ticks:T,grid:y,scale:j,style:F(T,_,C),domain:$(j,h),integersOnly:"count"===v}}function V(e,t){return null==e?t:o=>{const i=`${t?t(o):o}`;return i.length>e?`${i.slice(0,e)}...`:i}}function N(e,t,o=!1,i=!1){if(o)return l.ScaleType.Time;if(i)return l.ScaleType.Linear;if(!t)return l.ScaleType.Ordinal;const n=null==e?void 0:e.type;return n===L.e.SquareRoot?l.ScaleType.Sqrt:n}function F(e,t,o=d.LabelRotation.Vertical){var i;return{axisTitle:{visible:(null!=t?t:"").trim().length>0},tickLabel:{visible:null==e?void 0:e.show,rotation:-(null!==(i=null==e?void 0:e.rotation)&&void 0!==i?i:o)}}}function $(e,t){if(t||!e)return;const{min:o,max:i,defaultYExtents:n,boundsMargin:a}=e;return{fit:n,padding:a||void 0,min:null!=o?o:NaN,max:null!=i?i:NaN}}var H=o(20);function U(e,t){if(!t)return;if(Array.isArray(t))return Object(s.compact)(t.map((t=>{const o=t&&e[t.accessor];return o&&G(o,t)})));const o=e[t.accessor];return o&&G(o,t)}const G=({id:e,name:t},{accessor:o,format:i,params:n,aggType:a})=>({accessor:e,column:o,title:t,format:i,aggType:a,aggId:Object(H.a)(e),formatter:e=>Object(w.c)().deserialize(i).convert(e),params:n});var K=o(24);function Y(e,t){var o,i,n,a,r;const{thresholdLine:s,orderBucketsBySum:d,addTimeMarker:c,radiusRatio:p,labels:m,fittingFunction:v,detailedTooltip:f,isVislibVis:g,fillOpacity:h}=t,b=function(e,{x:t,y:o,z:i,series:n,splitColumn:a,splitRow:r}){var l,s;const d=Array.isArray(n)||void 0===n?n:[n];return{x:null!==(l=U(e,t))&&void 0!==l?l:{accessor:null,aggId:null,aggType:null,title:T.i18n.translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}},y:null!==(s=U(e,o))&&void 0!==s?s:[],z:i&&(null==i?void 0:i.length)>0?U(e,i[0]):void 0,series:U(e,d),splitColumn:null!=a&&a.length?U(e,a[0]):void 0,splitRow:null!=r&&r.length?U(e,r[0]):void 0}}(e.columns,t.dimensions),x=B(t.categoryAxes[0],t.grid,b.x,t.seriesParams,(null===(o=t.dimensions.x)||void 0===o?void 0:o.aggType)===u.BUCKET_TYPES.DATE_HISTOGRAM),y=function(e,{addTooltip:t,detailedTooltip:o}){return{type:t?l.TooltipType.VerticalCursor:l.TooltipType.None,detailedTooltip:o?R(e):void 0}}(b,t),w=[];t.dimensions.y.forEach((e=>{const o=e.accessor,i=b.y.find((({column:e})=>e===o)),n=t.seriesParams.find((({data:{id:e}})=>e===(null==i?void 0:i.aggId))),a=t.valueAxes.find((({id:e})=>e===(null==n?void 0:n.valueAxis)));i&&a&&w.push(B(a,t.grid,i,t.seriesParams))}));const j=((null===(i=t.dimensions.x)||void 0===i?void 0:i.aggType)===u.BUCKET_TYPES.DATE_HISTOGRAM||(null===(n=t.dimensions.x)||void 0===n?void 0:n.aggType)===u.BUCKET_TYPES.HISTOGRAM)&&X(t.seriesParams,b.y,w),_=null!==(a=b.x.params.date)&&void 0!==a&&a;return{markSizeRatio:.6*p,fittingFunction:v,fillOpacity:h,detailedTooltip:f,orderBucketsBySum:d,isTimeChart:_,isVislibVis:g,showCurrentTime:c&&_,showValueLabel:null!==(r=m.show)&&void 0!==r&&r,enableHistogramMode:j,tooltip:y,aspects:b,xAxis:x,yAxes:w,legend:z(t),rotation:D(t.categoryAxes[0]),thresholdLine:M(s,w,t.seriesParams)}}const X=(e,t,o)=>{const i=e.filter((({type:e,data:{id:o}})=>e===K.ChartType.Histogram&&void 0!==t.find((({aggId:e})=>e===o))));return!([...i.reduce(((e,{valueAxis:t,mode:o})=>(e.add(t),e)),new Set)].length>1)&&i.every((({valueAxis:e,mode:t})=>"stacked"===t))};o(43);const W="__chart_splitter__",q=({splitColumnAccessor:e,splitRowAccessor:t,splitDimension:o})=>{var i,n;let a="alphaDesc";if("terms"===(null==o||null===(i=o.meta)||void 0===i||null===(n=i.params)||void 0===n?void 0:n.id)){var s,d;const e=null==o||null===(s=o.meta)||void 0===s||null===(d=s.sourceParams)||void 0===d?void 0:d.params;a="asc"===(null==e?void 0:e.order)?"alphaAsc":"alphaDesc"}return e||t?Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(l.GroupBy,{id:W,by:(o,i)=>{const n=e||t;return n?"function"==typeof n?n(i):i[n]:o.id},sort:a}),Object(h.jsx)(l.SmallMultiples,{splitVertically:t?W:void 0,splitHorizontally:e?W:void 0})):null},Z=e=>{var t,o,i;const[r,u]=Object(a.useState)((()=>{var t;const o=null==e.visParams.addLegend||e.visParams.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",o)})),[m,v]=Object(a.useState)(null),x=Object(a.useRef)(null),T=Object(d.useActiveCursor)(Object(w.a)(),x,{datatables:[e.visData]}),L=Object(a.useCallback)((t=>{t&&e.renderComplete()}),[e]);Object(a.useEffect)((()=>{(async()=>{const e=await Object(w.d)().getPalettes();v(e)})()}),[]);const M=Object(a.useCallback)(((t,o,i,n)=>{const a=g(i);return i=>{if(null!==o){const r=Object(d.getFilterFromChartClickEventFn)(t,o,a,n)(i);e.fireEvent(r)}}}),[e]),P=Object(a.useCallback)(((t,o,i)=>{if(null!==o&&i)return i=>{const n=Object(d.getBrushFromChartBrushEventFn)(t,o)(i);e.fireEvent(n)}}),[e]),D=Object(a.useCallback)(((e,t,o)=>{const i=g(o);return o=>null!==t?Object(d.getFilterFromSeriesFn)(e)(o,i):null}),[]),I=Object(a.useCallback)(((t,o=!1)=>{e.fireEvent({...t,data:{...t.data,negate:o}})}),[e]),R=Object(a.useCallback)((()=>{u((t=>{var o;const i=!t;return null!==(o=e.uiState)&&void 0!==o&&o.set&&e.uiState.set("vis.legendOpen",i),i}))}),[e.uiState]),z=Object(a.useCallback)(((t,o)=>{var i,n;const a=(null===(i=e.uiState)||void 0===i?void 0:i.get("vis.colors"))||{};a[o]!==t&&t?a[o]=t:delete a[o],null!==(n=e.uiState)&&void 0!==n&&n.set&&(e.uiState.setSilent("vis.colors",null),e.uiState.set("vis.colors",a),e.uiState.emit("colorChanged"))}),[e.uiState]),{visData:B,visParams:V,syncColors:N}=e,F=Y(B,V),$=function(){const e=Object(w.g)();if(e.isDefault("dateFormat:tz")){return y.a.tz.guess()||y()().format("Z")}return e.get("dateFormat:tz","Browser")}(),H=F.xAxis.scale.type===l.ScaleType.Ordinal?void 0:(e=>{var t;const o=null!==(t=null==e?void 0:e.interval)&&void 0!==t?t:void 0,i=e.date?e.bounds:null;return i?{min:i.min,max:i.max,minInterval:o}:{minInterval:o,min:NaN,max:NaN}})(F.aspects.x.params),U=V.seriesParams.some((({type:e,data:{id:t}})=>e===c.ChartType.Histogram&&void 0!==F.aspects.y.find((({aggId:e})=>e===t)))),G=F.xAxis.scale.type===l.ScaleType.Ordinal?void 0:((e,{accessor:t,params:o},i,n,a)=>{if(t&&n&&"min"in n&&"max"in n&&"intervalESValue"in o&&"intervalESUnit"in o){const{interval:r,intervalESValue:l,intervalESUnit:c}=o,u=Object(s.uniq)(e.map((e=>e[t])).sort()),[p]=u,m=u[u.length-1],v=Math.min(p,n.min),f=Math.max(n.max-r,m);return{min:v,max:a?f:f+r,minInterval:Object(d.getAdjustedInterval)(u,l,c,i)}}return{minInterval:"interval"in o?o.interval:void 0,min:NaN,max:NaN}})(B.rows,F.aspects.x,$,H,U),K=Object(a.useMemo)((()=>{var e;return null!==(e=F.legend.position)&&void 0!==e?e:l.Position.Right}),[F.legend.position]),X=Object(w.e)().useDarkMode(),W=((e,t=!1)=>Object(s.memoize)((({splitAccessors:o,yAccessor:i})=>{var n,a;const r=function(e,t){if(e.size<1)return[];const o=[];return e.forEach(((e,i)=>{const n=(null!=t?t:[]).find((({accessor:e})=>e===i));o.push(null!=n&&n.formatter?null==n?void 0:n.formatter(e):e)})),o}(o,e.series),l=null!==(n=null===(a=e.y.find((({accessor:e})=>e===i)))||void 0===a?void 0:a.title)&&void 0!==n?n:null;return l?t?0===r.length?l:`${r.join(" - ")}: ${l}`:r.length>0?r.join(" - "):l:null})))(F.aspects,F.aspects.y.length>1),Z=null===(t=F.aspects.series)||void 0===t?void 0:t.map((({accessor:e,formatter:t})=>({accessor:e,formatter:t}))),J=Object(a.useMemo)((()=>((e,t,o)=>{const i=[];return t?(e.forEach((e=>{let n="";null==t||t.forEach((({accessor:t,formatter:o})=>{if(!t)return;const i=o?o(e[t]):e[t];n?n+=` - ${i}`:n=i})),o.length>1?o.forEach((e=>{i.includes(`${n}: ${e.title}`)||i.push(`${n}: ${e.title}`)})):i.includes(n)||i.push(n)})),i):[]})(B.rows,Z,F.aspects.y)),[F.aspects.y,Z,B.rows]),Q=Object(a.useCallback)((t=>{var o;const i=W(t);if(!i)return null;const n=null!==(o=e.uiState)&&void 0!==o&&o.get?e.uiState.get("vis.colors",{}):{};if(Object.keys(n).includes(i))return n[i];return(null==m?void 0:m.get(V.palette.name).getCategoricalColor([{name:i,rankAtDepth:Z?J.findIndex((e=>e===i)):F.aspects.y.findIndex((e=>e.accessor===t.yAccessor)),totalSeriesAtDepth:Z?J.length:F.aspects.y.length}],{maxDepth:1,totalSeries:Z?J.length:F.aspects.y.length,behindText:!1,syncColors:N}))||null}),[J,F.aspects.y,W,e.uiState,Z,N,V.palette.name,m]),ee=(te=F.aspects.x,null!==(oe=f("__customXAccessor__")(te))&&void 0!==oe?oe:()=>{var e;return null===(e=te.params)||void 0===e?void 0:e.defaultValue});var te,oe;const ie=Object(a.useMemo)((()=>F.aspects.series?Object(s.compact)(F.aspects.series.map(f(p))):[]),[F.aspects.series]),ne=F.aspects.splitColumn?f(p,!0)(F.aspects.splitColumn):void 0,ae=F.aspects.splitRow?f(p,!0)(F.aspects.splitRow):void 0,re=Object(a.useMemo)((()=>(({aspects:e,yAxes:t,xAxis:o,showValueLabel:i,enableHistogramMode:n,fittingFunction:a,fillOpacity:r},s,d,u,p,m,v,f)=>s.map((({show:s,valueAxis:g,data:{id:x},lineWidth:y,showCircles:w,circlesRadius:T,drawLinesBetweenPoints:j,mode:_,interpolate:C,type:O})=>{var k,S,A,E,L,M;const P=e.y.filter((e=>((e,{aggId:t,accessor:o})=>(t===e||((e,t)=>e.toString().split(".")[0]===t)(null!=t?t:"",e))&&null!==o)(x,e)));if(!s||!P.length)return null;const D=P.map((e=>e.accessor)),I=`${O}-${D[0]}`,R=null===(k=t.find((({groupId:e})=>e===g)))||void 0===k?void 0:k.scale,z=(null===(S=e.splitColumn)||void 0===S?void 0:S.accessor)||(null===(A=e.splitRow)||void 0===A?void 0:A.accessor),B=[String(v)];z&&B.push(z);let V=d;"percentage"===(null==R?void 0:R.mode)&&D.forEach((e=>{V=Object(l.computeRatioByGroups)(V,B,(t=>t[e]),e)}));const N="stacked"===_,F="normal"===(null==R?void 0:R.mode)||null==R?void 0:R.mode,$=N?`__pseudo_stacked_group-${g}__`:g,H=N?g:void 0;switch(O){case c.ChartType.Histogram:return Object(h.jsx)(l.BarSeries,{key:I,id:I,name:u,color:p,tickFormat:P[0].formatter,groupId:$,useDefaultGroupDomain:H,xScaleType:o.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:v,yAccessors:D,splitSeriesAccessors:f,data:V,timeZone:m,stackAccessors:N?["__any_value__"]:void 0,enableHistogramMode:n,stackMode:F,minBarHeight:2,displayValueSettings:{showValueLabel:i,isValueContainedInElement:!1,isAlternatingValueLabel:!1,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges,l.LabelOverflowConstraint.BarGeometry]}});case c.ChartType.Area:case c.ChartType.Line:const t=w&&null!==(E=null===(L=e.z)||void 0===L?void 0:L.accessor)&&void 0!==E?E:void 0;return Object(h.jsx)(l.AreaSeries,{key:I,id:I,fit:a,color:p,tickFormat:P[0].formatter,name:u,curve:b(C),groupId:$,useDefaultGroupDomain:H,xScaleType:o.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:v,yAccessors:D,markSizeAccessor:t,markFormat:null===(M=e.z)||void 0===M?void 0:M.formatter,splitSeriesAccessors:f,data:V,stackAccessors:N?["__any_value__"]:void 0,displayValueSettings:{showValueLabel:i,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges]},timeZone:m,stackMode:F,areaSeriesStyle:{area:{...O===c.ChartType.Line?{opacity:0}:{opacity:r}},line:{strokeWidth:y,visible:j},point:{visible:w,fill:t?l.ColorVariant.Series:void 0,radius:T}}});default:return null}})))(F,V.seriesParams,B.rows,W,Q,$,ee,ie)),[F,Q,W,ie,$,B.rows,V.seriesParams,ee]),le=Object(a.useMemo)((()=>((e,t,o,i,n)=>({anchor:r,color:l,onClose:s,onChange:c,seriesIdentifiers:[u]})=>{const p=o(u),m=null==n?void 0:n.get("vis.colors",{}),v=Object.keys(m).includes(p);let f=!1;const g=Object(a.useCallback)((()=>{null==s||s()}),[s]);return Object(h.jsx)(j.EuiOutsideClickDetector,{onOutsideClick:g},Object(h.jsx)(j.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:r,anchorPosition:C(e),closePopover:s,panelPaddingSize:"s"},Object(h.jsx)(d.ColorPicker,{color:"kibana_palette"===i?l:l.toLowerCase(),onChange:e=>{p&&(e&&c(e),t(e,p),e&&f||s())},label:p,useLegacyColors:"kibana_palette"===i,colorIsOverwritten:v,onKeyDown:e=>{13===e.keyCode&&(null==s||s()),f=!0}})))})(K,z,W,V.palette.name,e.uiState)),[W,K,e.uiState,z,V.palette.name]),se=V.dimensions.splitColumn?B.columns[V.dimensions.splitColumn[0].accessor]:V.dimensions.splitRow?B.columns[V.dimensions.splitRow[0].accessor]:void 0;return Object(h.jsx)("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},Object(h.jsx)(d.LegendToggle,{onClick:R,showLegend:r,legendPosition:K}),Object(h.jsx)(l.Chart,{size:"100%",ref:x},Object(h.jsx)(q,{splitColumnAccessor:ne,splitRowAccessor:ae,splitDimension:se}),Object(h.jsx)(A,n()({},F,{truncateLegend:V.truncateLegend,maxLegendLines:V.maxLegendLines,showLegend:r,onPointerUpdate:T,legendPosition:K,xDomain:H,adjustedXDomain:G,legendColorPicker:le,onElementClick:M(B,ee,ie,null!=ne?ne:ae),onBrushEnd:P(B,ee,"interval"in F.aspects.x.params),onRenderChange:L,legendAction:F.aspects.series&&(null!==(o=null===(i=F.aspects.series)||void 0===i?void 0:i.length)&&void 0!==o?o:0)>0?_((async e=>{if(!e)return!1;const t=await Object(w.b)().createFiltersFromValueClickAction(e.data);return Boolean(t.length)}),D(B,ee,ie),I,W):void 0})),Object(h.jsx)(E,F.thresholdLine),Object(h.jsx)(S,{enabled:F.showCurrentTime,isDarkMode:X,domain:H}),Object(h.jsx)(k,{isFullBin:!F.enableHistogramMode,enabled:F.isTimeChart,isDarkMode:X,domain:H,hideTooltips:!F.detailedTooltip,adjustedDomain:G}),Object(h.jsx)(O,F.xAxis),F.yAxes.map((e=>Object(h.jsx)(O,n()({key:e.id},e)))),re))};t.default=Object(a.memo)(Z)}])]);
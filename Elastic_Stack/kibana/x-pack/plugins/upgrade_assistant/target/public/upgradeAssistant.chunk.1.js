/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.upgradeAssistant_bundle_jsonpfunction=window.upgradeAssistant_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(e,t,s){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function o(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function l(e,t){for(var s={},a=[],n=0;n<e.length;n++){var i=e[n],l=t.base?i[0]+t.base:i[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=o(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(r[d].references++,r[d].updater(p)):r.push({identifier:u,updater:b(p,t),references:1}),a.push(u)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,s,a){var n=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var i=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function g(e,t,s){var a=s.css,n=s.media,i=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var x=null,j=0;function b(e,t){var s,a,n;if(t.singleton){var i=j++;s=x||(x=c(t)),a=p.bind(null,s,i,!1),n=p.bind(null,s,i,!0)}else s=c(t),a=g.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var n=o(s[a]);r[n].references--}for(var i=l(e,t),c=0;c<s.length;c++){var u=o(s[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}s=i}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",a=e[3];if(!a)return s;if(t&&"function"==typeof btoa){var n=(r=a,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),i=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[s].concat(i).concat([n]).join("\n")}var r,o,l;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(n[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&n[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},function(e,t){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var a=new Uint8Array(16);e.exports=function(){return s(a),a}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){for(var s=[],a=0;a<256;++a)s[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,n=s;return[n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]]].join("")}},function(e,t,s){"use strict";function a(e){return e}function n(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=a,t.unsafeCoerce=a,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,s){return e(s,t)}},t.flow=function(e,t,s,a,n,i,r,o,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return a(s(t(e.apply(this,arguments))))};case 5:return function(){return n(a(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(n(a(s(t(e.apply(this,arguments))))))};case 7:return function(){return r(i(n(a(s(t(e.apply(this,arguments)))))))};case 8:return function(){return o(r(i(n(a(s(t(e.apply(this,arguments))))))))};case 9:return function(){return l(o(r(i(n(a(s(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=n,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return e(t)}},t.pipe=function(e,t,s,a,n,i,r,o,l,c,u,d,p,g,x,j,b,f,m,h){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return a(s(t(e)));case 5:return n(a(s(t(e))));case 6:return i(n(a(s(t(e)))));case 7:return r(i(n(a(s(t(e))))));case 8:return o(r(i(n(a(s(t(e)))))));case 9:return l(o(r(i(n(a(s(t(e))))))));case 10:return c(l(o(r(i(n(a(s(t(e)))))))));case 11:return u(c(l(o(r(i(n(a(s(t(e))))))))));case 12:return d(u(c(l(o(r(i(n(a(s(t(e)))))))))));case 13:return p(d(u(c(l(o(r(i(n(a(s(t(e))))))))))));case 14:return g(p(d(u(c(l(o(r(i(n(a(s(t(e)))))))))))));case 15:return x(g(p(d(u(c(l(o(r(i(n(a(s(t(e))))))))))))));case 16:return j(x(g(p(d(u(c(l(o(r(i(n(a(s(t(e)))))))))))))));case 17:return b(j(x(g(p(d(u(c(l(o(r(i(n(a(s(t(e))))))))))))))));case 18:return f(b(j(x(g(p(d(u(c(l(o(r(i(n(a(s(t(e)))))))))))))))));case 19:return m(f(b(j(x(g(p(d(u(c(l(o(r(i(n(a(s(t(e))))))))))))))))));case 20:return h(m(f(b(j(x(g(p(d(u(c(l(o(r(i(n(a(s(t(e)))))))))))))))))))}},t.hole=n,t.bind_=function(e,t,s){var a;return Object.assign({},e,((a={})[t]=s,a))},t.bindTo_=function(e){return function(t){var s;return(s={})[e]=t,s}}},function(e,t,s){e.exports=s(7)(1074)},function(e,t,s){var a=s(39),n=s(40),i=n;i.v1=a,i.v4=n,e.exports=i},function(e,t,s){var a,n,i=s(34),r=s(35),o=0,l=0;e.exports=function(e,t,s){var c=t&&s||0,u=t||[],d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==p){var g=i();null==d&&(d=a=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=n=16383&(g[6]<<8|g[7]))}var x=void 0!==e.msecs?e.msecs:(new Date).getTime(),j=void 0!==e.nsecs?e.nsecs:l+1,b=x-o+(j-l)/1e4;if(b<0&&void 0===e.clockseq&&(p=p+1&16383),(b<0||x>o)&&void 0===e.nsecs&&(j=0),j>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=x,l=j,n=p;var f=(1e4*(268435455&(x+=122192928e5))+j)%4294967296;u[c++]=f>>>24&255,u[c++]=f>>>16&255,u[c++]=f>>>8&255,u[c++]=255&f;var m=x/4294967296*1e4&268435455;u[c++]=m>>>8&255,u[c++]=255&m,u[c++]=m>>>24&15|16,u[c++]=m>>>16&255,u[c++]=p>>>8|128,u[c++]=255&p;for(var h=0;h<6;++h)u[c+h]=d[h];return t||r(u)}},function(e,t,s){var a=s(34),n=s(35);e.exports=function(e,t,s){var i=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||n(r)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(42);case"v7light":return s(44);case"v8dark":return s(46);case"v8light":return s(48)}},function(e,t,s){var a=s(32),n=s(43);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(45);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(47);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(49);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeable=t.pipe=void 0;var a=s(36);t.pipe=a.pipe;t.pipeable=function(e){var t={};if(function(e){return"function"==typeof e.map}(e)){t.map=function(t){return function(s){return e.map(s,t)}}}if(function(e){return"function"==typeof e.contramap}(e)){t.contramap=function(t){return function(s){return e.contramap(s,t)}}}if(function(e){return"function"==typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(s){return e.mapWithIndex(s,t)}}}if(function(e){return"function"==typeof e.ap}(e)){t.ap=function(t){return function(s){return e.ap(s,t)}},t.apFirst=function(t){return function(s){return e.ap(e.map(s,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(s){return e.ap(e.map(s,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"==typeof e.chain}(e)){t.chain=function(t){return function(s){return e.chain(s,t)}},t.chainFirst=function(t){return function(s){return e.chain(s,(function(s){return e.map(t(s),(function(){return s}))}))}},t.flatten=function(t){return e.chain(t,a.identity)}}if(function(e){return"function"==typeof e.bimap}(e)){t.bimap=function(t,s){return function(a){return e.bimap(a,t,s)}},t.mapLeft=function(t){return function(s){return e.mapLeft(s,t)}}}if(function(e){return"function"==typeof e.extend}(e)){t.extend=function(t){return function(s){return e.extend(s,t)}},t.duplicate=function(t){return e.extend(t,a.identity)}}if(function(e){return"function"==typeof e.reduce}(e)){t.reduce=function(t,s){return function(a){return e.reduce(a,t,s)}},t.foldMap=function(t){var s=e.foldMap(t);return function(e){return function(t){return s(t,e)}}},t.reduceRight=function(t,s){return function(a){return e.reduceRight(a,t,s)}}}if(function(e){return"function"==typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,s){return function(a){return e.reduceWithIndex(a,t,s)}},t.foldMapWithIndex=function(t){var s=e.foldMapWithIndex(t);return function(e){return function(t){return s(t,e)}}},t.reduceRightWithIndex=function(t,s){return function(a){return e.reduceRightWithIndex(a,t,s)}}}if(function(e){return"function"==typeof e.alt}(e)){t.alt=function(t){return function(s){return e.alt(s,t)}}}if(function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)){t.filter=function(t){return function(s){return e.filter(s,t)}},t.filterMap=function(t){return function(s){return e.filterMap(s,t)}},t.partition=function(t){return function(s){return e.partition(s,t)}},t.partitionMap=function(t){return function(s){return e.partitionMap(s,t)}}}if(function(e){return"function"==typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(s){return e.filterWithIndex(s,t)}},t.filterMapWithIndex=function(t){return function(s){return e.filterMapWithIndex(s,t)}},t.partitionWithIndex=function(t){return function(s){return e.partitionWithIndex(s,t)}},t.partitionMapWithIndex=function(t){return function(s){return e.partitionMapWithIndex(s,t)}}}if(function(e){return"function"==typeof e.promap}(e)){t.promap=function(t,s){return function(a){return e.promap(a,t,s)}}}if(function(e){return"function"==typeof e.compose}(e)){t.compose=function(t){return function(s){return e.compose(s,t)}}}if(function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(s){return"None"===s._tag?e.throwError(t()):e.of(s.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,s){return function(a){return t(a)?e.of(a):e.throwError(s(a))}},t.filterOrElse=function(t,s){return function(a){return e.chain(a,(function(a){return t(a)?e.of(a):e.throwError(s(a))}))}}}return t}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var a=s(52),n=s(36);function i(e,s){try{return t.right(e())}catch(e){return t.left(s(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(s){return null==s?t.left(e):t.right(s)}},t.tryCatch=i,t.parseJSON=function(e,t){return i((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return i((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(s){return"None"===s._tag?t.left(e()):t.right(s.value)}},t.fromPredicate=function(e,s){return function(a){return e(a)?t.right(a):t.left(s(a))}},t.fold=function(e,s){return function(a){return t.isLeft(a)?e(a.left):s(a.right)}},t.getOrElseW=function(e){return function(s){return t.isLeft(s)?e(s.left):s.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(s){return t.isLeft(s)?e(s.left):s}},t.filterOrElse=function(e,s){return t.chain((function(a){return e(a)?t.right(a):t.left(s(a))}))};var r=function(e,s){return n.pipe(e,t.map(s))},o=function(e,s){return n.pipe(e,t.ap(s))},l=function(e,s){return n.pipe(e,t.chain(s))},c=function(e,s,a){return n.pipe(e,t.reduce(s,a))},u=function(e){return function(s,a){var i=t.foldMap(e);return n.pipe(s,i(a))}},d=function(e,s,a){return n.pipe(e,t.reduceRight(s,a))},p=function(e){var s=t.traverse(e);return function(e,t){return n.pipe(e,s(t))}},g=function(e,s,a){return n.pipe(e,t.bimap(s,a))},x=function(e,s){return n.pipe(e,t.mapLeft(s))},j=function(e,s){return n.pipe(e,t.alt(s))},b=function(e,s){return n.pipe(e,t.extend(s))},f=function(e,s){return a.tailRec(s(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(s(e.right.left)):t.right(t.right(e.right.right))}))};function m(e){return{concat:function(s,a){return t.isLeft(s)?s:t.isLeft(a)?a:t.right(e.concat(s.right,a.right))}}}function h(e){var s=t.left(e.empty);return{URI:t.URI,_E:void 0,map:r,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?s:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:s}:{left:s,right:t.right(e.right.right)}},filter:function(e,a){return t.isLeft(e)||a(e.right)?e:s},filterMap:function(e,a){if(t.isLeft(e))return e;var n=a(e.right);return"None"===n._tag?s:t.right(n.value)},partition:function(e,a){return t.isLeft(e)?{left:e,right:e}:a(e.right)?{left:s,right:t.right(e.right)}:{left:t.right(e.right),right:s}},partitionMap:function(e,a){if(t.isLeft(e))return{left:e,right:e};var n=a(e.right);return t.isLeft(n)?{left:t.right(n.left),right:s}:{left:s,right:t.right(n.right)}}}}function O(e){return{URI:t.URI,_E:void 0,map:r,ap:function(s,a){return t.isLeft(s)?t.isLeft(a)?t.left(e.concat(s.left,a.left)):s:t.isLeft(a)?a:t.right(s.right(a.right))},of:t.of}}function v(e){return{URI:t.URI,_E:void 0,map:r,alt:function(s,a){if(t.isRight(s))return s;var n=a();return t.isLeft(n)?t.left(e.concat(s.left,n.left)):n}}}function E(e,s){return{concat:function(a,n){return t.isLeft(a)?t.isLeft(n)?t.left(e.concat(a.left,n.left)):a:t.isLeft(n)?n:t.right(s.concat(a.right,n.right))}}}t.map=function(e){return function(s){return t.isLeft(s)?s:t.right(e(s.right))}},t.bimap=function(e,s){return function(a){return t.isLeft(a)?t.left(e(a.left)):t.right(s(a.right))}},t.mapLeft=function(e){return function(s){return t.isLeft(s)?t.left(e(s.left)):s}},t.apW=function(e){return function(s){return t.isLeft(s)?s:t.isLeft(e)?e:t.right(s.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return n.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return n.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(s){return t.isLeft(s)?s:e(s.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(s){return n.pipe(s,t.chainW((function(s){return n.pipe(e(s),t.map((function(){return s})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(n.identity),t.alt=function(e){return function(s){return t.isLeft(s)?e():s}},t.extend=function(e){return function(s){return t.isLeft(s)?s:t.right(e(s))}},t.duplicate=t.extend(n.identity),t.reduce=function(e,s){return function(a){return t.isLeft(a)?e:s(e,a.right)}},t.foldMap=function(e){return function(s){return function(a){return t.isLeft(a)?e.empty:s(a.right)}}},t.reduceRight=function(e,s){return function(a){return t.isLeft(a)?e:s(a.right,e)}},t.traverse=function(e){return function(s){return function(a){return t.isLeft(a)?e.of(t.left(a.left)):e.map(s(a.right),t.right)}}},t.sequence=function(e){return function(s){return t.isLeft(s)?e.of(t.left(s.left)):e.map(s.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,s){return{show:function(a){return t.isLeft(a)?"left("+e.show(a.left)+")":"right("+s.show(a.right)+")"}}},t.getEq=function(e,s){return{equals:function(a,n){return a===n||(t.isLeft(a)?t.isLeft(n)&&e.equals(a.left,n.left):t.isRight(n)&&s.equals(a.right,n.right))}}},t.getSemigroup=function(e){return{concat:function(s,a){return t.isLeft(a)?s:t.isLeft(s)?a:t.right(e.concat(s.right,a.right))}}},t.getApplySemigroup=m,t.getApplyMonoid=function(e){return{concat:m(e).concat,empty:t.right(e.empty)}},t.getFilterable=h,t.getWitherable=function(e){var s=h(e);return{URI:t.URI,_E:void 0,map:r,compact:s.compact,separate:s.separate,filter:s.filter,filterMap:s.filterMap,partition:s.partition,partitionMap:s.partitionMap,traverse:p,sequence:t.sequence,reduce:c,foldMap:u,reduceRight:d,wither:function(e){var t=p(e);return function(a,n){return e.map(t(a,n),s.compact)}},wilt:function(e){var t=p(e);return function(a,n){return e.map(t(a,n),s.separate)}}}},t.getApplicativeValidation=O,t.getAltValidation=v,t.getValidation=function(e){var s=O(e),a=v(e);return{URI:t.URI,_E:void 0,map:r,of:t.of,chain:l,bimap:g,mapLeft:x,reduce:c,foldMap:u,reduceRight:d,extend:b,traverse:p,sequence:t.sequence,chainRec:f,throwError:t.throwError,ap:s.ap,alt:a.alt}},t.getValidationSemigroup=E,t.Functor={URI:t.URI,map:r},t.Applicative={URI:t.URI,map:r,ap:o,of:t.of},t.Monad={URI:t.URI,map:r,ap:o,of:t.of,chain:l},t.Foldable={URI:t.URI,reduce:c,foldMap:u,reduceRight:d},t.Traversable={URI:t.URI,map:r,reduce:c,foldMap:u,reduceRight:d,traverse:p,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:g,mapLeft:x},t.Alt={URI:t.URI,map:r,alt:j},t.Extend={URI:t.URI,map:r,extend:b},t.ChainRec={URI:t.URI,map:r,ap:o,chain:l,chainRec:f},t.MonadThrow={URI:t.URI,map:r,ap:o,of:t.of,chain:l,throwError:t.throwError},t.getValidationMonoid=function(e,s){return{concat:E(e,s).concat,empty:t.right(s.empty)}},t.either={URI:t.URI,map:r,of:t.of,ap:o,chain:l,reduce:c,foldMap:u,reduceRight:d,traverse:p,sequence:t.sequence,bimap:g,mapLeft:x,alt:j,extend:b,chainRec:f,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(s,a){return!t.isLeft(a)&&e.equals(s,a.right)}},t.exists=function(e){return function(s){return!t.isLeft(s)&&e(s.right)}},t.bindTo=function(e){return t.map(n.bindTo_(e))},t.bindW=function(e,s){return t.chainW((function(a){return n.pipe(s(a),t.map((function(t){return n.bind_(a,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,s){return n.flow(t.map((function(t){return function(s){return n.bind_(t,e,s)}})),t.apW(s))},t.apS=t.apSW},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var s=t(e);"Left"===s._tag;)s=t(s.left);return s.right}},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(54);case"v7light":return s(56);case"v8dark":return s(58);case"v8light":return s(60)}},function(e,t,s){var a=s(32),n=s(55);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#ff8585;background-color:#4d1f1f}.upgStepProgress__status--circle-complete{color:#97e8da;background-color:#26443f}.upgStepProgress__status--circle-paused{color:#ffd895;background-color:#4d3e25}.upgStepProgress__status--circle-cancelled{color:#ffd895;background-color:#4d3e25}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(57);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#bd271e;background-color:#f8e9e9}.upgStepProgress__status--circle-complete{color:#01776d;background-color:#e6f2f1}.upgStepProgress__status--circle-paused{color:#936400;background-color:#fef6e6}.upgStepProgress__status--circle-cancelled{color:#936400;background-color:#fef6e6}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(59);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#f98982;background-color:#4a201e}.upgStepProgress__status--circle-complete{color:#97e5e0;background-color:#264341}.upgStepProgress__status--circle-paused{color:#f5dc8d;background-color:#493f22}.upgStepProgress__status--circle-cancelled{color:#f5dc8d;background-color:#493f22}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(61);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#bd271e;background-color:#f8e9e9}.upgStepProgress__status--circle-complete{color:#007e77;background-color:#e6f9f7}.upgStepProgress__status--circle-paused{color:#8a6a0a;background-color:#fff9e8}.upgStepProgress__status--circle-cancelled{color:#8a6a0a;background-color:#fff9e8}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(63);case"v7light":return s(65);case"v8dark":return s(67);case"v8light":return s(69)}},function(e,t,s){var a=s(32),n=s(64);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(66);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(68);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(70);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(72);case"v7light":return s(74);case"v8dark":return s(76);case"v8light":return s(78)}},function(e,t,s){var a=s(32),n=s(73);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(75);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(77);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(32),n=s(79);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(33)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){"use strict";s.r(t),s.d(t,"mountManagementSection",(function(){return Vt}));var a=s(21),n=s.n(a),i=s(28),r=s(26),o=s(24),l=s(23),c=s(5),u=s(0),d=s(4),p=s(22);const g=Object(a.createContext)(void 0),x=({children:e,value:t})=>Object(p.jsx)(g.Provider,{value:t},e),j=()=>{const e=Object(a.useContext)(g);if(!e)throw new Error("useAppContext must be called from inside AppContext");return e};var b=s(38),f=s.n(b),m=s(3),h=s(25),O=s(6);const v=e=>m.i18n.translate("xpack.upgradeAssistant.noDeprecationsPrompt.description",{defaultMessage:"Your {deprecationType} configuration is up to date",values:{deprecationType:e}}),E=e=>Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.noDeprecationsPrompt.nextStepsDescription",defaultMessage:"Check the {overviewButton} for other Stack deprecations.",values:{overviewButton:Object(p.jsx)(l.EuiLink,{onClick:e},m.i18n.translate("xpack.upgradeAssistant.noDeprecationsPrompt.overviewLinkText",{defaultMessage:"Overview page"}))}}),k=({deprecationType:e,navigateToOverviewPage:t})=>Object(p.jsx)(l.EuiEmptyPrompt,{iconType:"check","data-test-subj":"noDeprecationsPrompt",title:Object(p.jsx)("h2",null,v(e)),body:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)("p",{"data-test-subj":"upgradeAssistantIssueSummary"},E(t)))}),y={critical:m.i18n.translate("xpack.upgradeAssistant.levelInfoTip.criticalLabel",{defaultMessage:"Critical issues must be resolved before you upgrade"}),warning:m.i18n.translate("xpack.upgradeAssistant.levelInfoTip.warningLabel",{defaultMessage:"Warning issues can be ignored at your discretion"})},S=({level:e})=>Object(p.jsx)(l.EuiIconTip,{content:y[e],position:"top",type:"iInCircle"}),T=e=>m.i18n.translate("xpack.upgradeAssistant.deprecationCount.criticalStatusLabel",{defaultMessage:"Critical: {count}",values:{count:e}}),C=e=>m.i18n.translate("xpack.upgradeAssistant.deprecationCount.warningStatusLabel",{defaultMessage:"Warning: {count}",values:{count:e}}),L=({totalCriticalDeprecations:e,totalWarningDeprecations:t})=>Object(p.jsx)(l.EuiFlexGroup,null,Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiHealth,{color:"danger","data-test-subj":"criticalDeprecationsCount"},T(e))),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(S,{level:"critical"})))),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiHealth,{color:"subdued","data-test-subj":"warningDeprecationsCount"},C(t))),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(S,{level:"warning"}))))),M={criticalBadgeLabel:m.i18n.translate("xpack.upgradeAssistant.deprecationBadge.criticalBadgeLabel",{defaultMessage:"Critical"}),resolvedBadgeLabel:m.i18n.translate("xpack.upgradeAssistant.deprecationBadge.resolvedBadgeLabel",{defaultMessage:"Resolved"}),warningBadgeLabel:m.i18n.translate("xpack.upgradeAssistant.deprecationBadge.warningBadgeLabel",{defaultMessage:"Warning"})},w=({isCritical:e,isResolved:t})=>t?Object(p.jsx)(l.EuiBadge,{color:"success","data-test-subj":"resolvedDeprecationBadge"},M.resolvedBadgeLabel):e?Object(p.jsx)(l.EuiBadge,{color:"danger","data-test-subj":"criticalDeprecationBadge"},M.criticalBadgeLabel):Object(p.jsx)(l.EuiBadge,{color:"default","data-test-subj":"warningDeprecationBadge"},M.warningBadgeLabel),F=({deprecationSource:e,message:t})=>Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger","data-test-subj":"deprecationsPageLoadingError"},Object(p.jsx)(l.EuiEmptyPrompt,{iconType:"alert",title:Object(p.jsx)("h2",null,m.i18n.translate("xpack.upgradeAssistant.deprecationsPageLoadingError.title",{defaultMessage:"Could not retrieve {deprecationSource} deprecation issues",values:{deprecationSource:e}})),body:t})),I=({documentationUrl:e})=>Object(p.jsx)(l.EuiLink,{target:"_blank","data-test-subj":"documentationLink",href:e},m.i18n.translate("xpack.upgradeAssistant.deprecationFlyout.learnMoreLinkLabel",{defaultMessage:"Learn more"})),D={cluster_settings:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterDeprecationTypeLabel",{defaultMessage:"Cluster"}),index_settings:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexDeprecationTypeLabel",{defaultMessage:"Index"}),node_settings:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.nodeDeprecationTypeLabel",{defaultMessage:"Node"}),ml_settings:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlDeprecationTypeLabel",{defaultMessage:"Machine Learning"})},A={initialPageSize:50,pageSizeOptions:[50,100,200]},_={manualCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.manualCellLabel",{defaultMessage:"Manual"}),manualCellTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.manualCellTooltipLabel",{defaultMessage:"This issue needs to be resolved manually."}),automatedCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automatedCellLabel",{defaultMessage:"Automated"}),automationInProgressCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationInProgressCellLabel",{defaultMessage:"Resolution in progress…"}),automationCompleteCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationCompleteCellLabel",{defaultMessage:"Resolved"}),automationFailedCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationFailedCellLabel",{defaultMessage:"Resolution failed"}),automatedCellTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automatedCellTooltipLabel",{defaultMessage:"This issue can be resolved automatically."})},P=({deprecationId:e,isAutomated:t,deprecationResolutionState:s})=>{if(t){if((null==s?void 0:s.id)===e){const{resolveDeprecationStatus:e}=s;switch(e){case"in_progress":return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},_.automationInProgressCellLabel)));case"fail":return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},_.automationFailedCellLabel)));case"ok":default:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check",color:"success"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},_.automationCompleteCellLabel)))}}return Object(p.jsx)(l.EuiToolTip,{position:"top",content:_.automatedCellTooltipLabel},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"indexSettings"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},_.automatedCellLabel))))}return Object(p.jsx)(l.EuiToolTip,{position:"top",content:_.manualCellTooltipLabel,"data-test-subj":"resolutionStatusCell"},Object(p.jsx)(l.EuiText,{size:"s",color:"subdued"},_.manualCellLabel))},R={refreshButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.refreshButtonLabel",{defaultMessage:"Refresh"}),statusColumnTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.statusColumnTitle",{defaultMessage:"Status"}),issueColumnTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.issueColumnTitle",{defaultMessage:"Issue"}),typeColumnTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.typeColumnTitle",{defaultMessage:"Type"}),resolutionColumnTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.resolutionColumnTitle",{defaultMessage:"Resolution"}),configDeprecationTypeCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.configDeprecationTypeCellLabel",{defaultMessage:"Config"}),featureDeprecationTypeCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.featureDeprecationTypeCellLabel",{defaultMessage:"Feature"}),unknownDeprecationTypeCellLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.unknownDeprecationTypeCellLabel",{defaultMessage:"Uncategorized"}),typeFilterLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.typeFilterLabel",{defaultMessage:"Type"}),criticalFilterLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.criticalFilterLabel",{defaultMessage:"Critical"}),searchPlaceholderLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.searchPlaceholderLabel",{defaultMessage:"Filter"})},B=({deprecations:e,reload:t,toggleFlyout:s,deprecationResolutionState:a})=>{const n=[{field:"level",name:R.statusColumnTitle,width:"5%",truncateText:!0,sortable:!0,render:e=>Object(p.jsx)(w,{isCritical:"critical"===e})},{field:"title",width:"40%",name:R.issueColumnTitle,truncateText:!0,sortable:!0,render:(e,t)=>Object(p.jsx)(l.EuiLink,{onClick:()=>s(t),"data-test-subj":"deprecationDetailsLink"},e)},{field:"filterType",name:R.typeColumnTitle,width:"20%",truncateText:!0,sortable:!0,render:e=>{switch(e){case"config":return R.configDeprecationTypeCellLabel;case"feature":return R.featureDeprecationTypeCellLabel;case"uncategorized":default:return R.unknownDeprecationTypeCellLabel}}},{field:"correctiveActions",name:R.resolutionColumnTitle,width:"30%",truncateText:!0,sortable:!0,render:(e,t)=>Object(p.jsx)(P,{deprecationId:t.id,isAutomated:Boolean(null==e?void 0:e.api),deprecationResolutionState:a})}],i={filters:[{type:"field_value_toggle",name:R.criticalFilterLabel,field:"level",value:"critical"},{type:"field_value_selection",field:"filterType",name:R.typeFilterLabel,multiSelect:!1,options:[{value:"config",name:R.configDeprecationTypeCellLabel},{value:"feature",name:R.featureDeprecationTypeCellLabel},{value:"uncategorized",name:R.unknownDeprecationTypeCellLabel}]}],box:{incremental:!0,placeholder:R.searchPlaceholderLabel},toolsRight:[Object(p.jsx)(l.EuiButton,{iconType:"refresh",onClick:t,"data-test-subj":"refreshButton",key:"refreshButton"},R.refreshButtonLabel)]};return Object(p.jsx)(l.EuiInMemoryTable,{items:e||[],itemId:"name",columns:n,search:i,sorting:{sort:{field:"level",direction:"asc"}},pagination:A,rowProps:()=>({"data-test-subj":"row"}),cellProps:(e,t)=>({"data-test-subj":`${((null==t?void 0:t.name)||"table").toLowerCase()}Cell`}),"data-test-subj":"kibanaDeprecationsTable",tableLayout:"auto"})};s(41);const z={closeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.closeButtonLabel",{defaultMessage:"Close"}),quickResolveButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveButtonLabel",{defaultMessage:"Quick resolve"}),retryQuickResolveButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.retryQuickResolveButtonLabel",{defaultMessage:"Try again"}),resolvedButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.resolvedButtonLabel",{defaultMessage:"Resolved"}),quickResolveInProgressButtonLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveInProgressButtonLabel",{defaultMessage:"Resolution in progress…"}),quickResolveCalloutTitle:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveCalloutTitle",defaultMessage:"Click {quickResolve} to fix this issue automatically.",values:{quickResolve:Object(p.jsx)("strong",null,m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveText",{defaultMessage:"Quick resolve"}))}}),quickResolveErrorTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveErrorTitle",{defaultMessage:"Error resolving issue"}),manualFixTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.manualFixTitle",{defaultMessage:"How to fix"})},U=({deprecation:e,closeFlyout:t,resolveDeprecation:s,deprecationResolutionState:i})=>{const{documentationUrl:r,message:o,correctiveActions:c,title:u}=e,d=(null==i?void 0:i.id)===e.id&&"ok"===(null==i?void 0:i.resolveDeprecationStatus),g=Object(a.useCallback)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.h),s(e)}),[e,s]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(w,{isCritical:"critical"===e.level,isResolved:d}),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",{id:"kibanaDeprecationDetailsFlyoutTitle",className:"eui-textBreakWord"},u))),Object(p.jsx)(l.EuiFlyoutBody,null,"fail"===(null==i?void 0:i.resolveDeprecationStatus)&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:z.quickResolveErrorTitle,color:"danger",iconType:"alert","data-test-subj":"quickResolveError"},i.resolveDeprecationError),Object(p.jsx)(l.EuiSpacer,null)),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",{className:"eui-textBreakWord"},o),r&&Object(p.jsx)("p",null,Object(p.jsx)(I,{documentationUrl:r}))),Object(p.jsx)(l.EuiSpacer,null),!d&&Object(p.jsx)("div",{"data-test-subj":"resolveSection"},c.api&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:z.quickResolveCalloutTitle,color:"primary",iconType:"iInCircle","data-test-subj":"quickResolveCallout"}),Object(p.jsx)(l.EuiSpacer,null)),c.manualSteps.length>0&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"manualStepsTitle"},Object(p.jsx)("h3",null,z.manualFixTitle)),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiText,null,1===c.manualSteps.length?Object(p.jsx)("p",{"data-test-subj":"manualStep",className:"eui-textBreakWord"},c.manualSteps[0]):Object(p.jsx)("ol",{"data-test-subj":"manualStepsList"},c.manualSteps.map(((e,t)=>Object(p.jsx)("li",{"data-test-subj":"manualStepsListItem",key:`step-${t}`,className:"upgResolveStep eui-textBreakWord"},e)))))))),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{onClick:t,flush:"left"},z.closeButtonLabel)),c.api&&!d&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButton,{fill:!0,"data-test-subj":"resolveButton",onClick:g,isLoading:Boolean("in_progress"===(null==i?void 0:i.resolveDeprecationStatus))},(e=>"in_progress"===(null==e?void 0:e.resolveDeprecationStatus)?z.quickResolveInProgressButtonLabel:"ok"===(null==e?void 0:e.resolveDeprecationStatus)?z.resolvedButtonLabel:null!=e&&e.resolveDeprecationError?z.retryQuickResolveButtonLabel:z.quickResolveButtonLabel)(i))))))},{useGlobalFlyout:N}=d.c,W={pageTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.pageTitle",{defaultMessage:"Kibana deprecation issues"}),pageDescription:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.pageDescription",{defaultMessage:"Resolve all critical issues before upgrading to the next major version of Elastic."}),docLinkText:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.docLinkText",{defaultMessage:"Documentation"}),deprecationLabel:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.deprecationLabel",{defaultMessage:"Kibana"}),isLoading:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.loadingText",{defaultMessage:"Loading deprecation issues…"}),kibanaDeprecationErrorTitle:m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.kibanaDeprecationErrorTitle",{defaultMessage:"List of deprecation issues might be incomplete"}),getKibanaDeprecationErrorDescription:e=>m.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.kibanaDeprecationErrorDescription",{defaultMessage:"Failed to get deprecation issues for {pluginCount, plural, one {this plugin} other {these plugins}}: {pluginIds}. Check the Kibana server logs for more information.",values:{pluginCount:e.length,pluginIds:e.join(", ")}})},q=Object(r.withRouter)((({history:e})=>{const[t,s]=Object(a.useState)(void 0),[i,r]=Object(a.useState)([]),[o,c]=Object(a.useState)(!1),[u,g]=Object(a.useState)(void 0),[x,b]=Object(a.useState)(void 0),[m,v]=Object(a.useState)(void 0),{services:{core:{deprecations:E},breadcrumbs:y}}=j(),{addContent:S,removeContent:T}=N(),C=Object(a.useCallback)((async()=>{c(!0);try{const e=await E.getAllDeprecations(),t=[],a=[];e.forEach((e=>{var s;if("fetch_error"!==e.level)t.push({...e,id:f.a.v4(),filterType:null!==(s=e.deprecationType)&&void 0!==s?s:"uncategorized"});else{!1===a.includes(e.domainId)&&a.push(e.domainId)}})),s(t),r(a)}catch(e){g(e)}c(!1)}),[E]),M=Object(a.useMemo)((()=>(e=>{const t=[],s=[];return e.forEach((e=>{"critical"!==e.level?s.push(e):t.push(e)})),{criticalDeprecations:t.length,warningDeprecations:s.length}})(t||[])),[t]),w=e=>{b(e)},I=Object(a.useCallback)((()=>{w(),T("deprecationDetails")}),[T]),D=Object(a.useCallback)((async e=>{v({id:e.id,resolveDeprecationStatus:"in_progress"});const t=await E.resolveDeprecation(e);v({id:e.id,resolveDeprecationStatus:t.status,resolveDeprecationError:"fail"===t.status?t.reason:void 0}),I()}),[I,E]);return Object(a.useEffect)((()=>{x&&S({id:"deprecationDetails",Component:U,props:{deprecation:x,closeFlyout:I,resolveDeprecation:D,deprecationResolutionState:m&&x.id===m.id?m:void 0},flyoutProps:{onClose:I,"data-test-subj":"kibanaDeprecationDetails","aria-labelledby":"kibanaDeprecationDetailsFlyoutTitle"}})}),[S,I,m,x,D]),Object(a.useEffect)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.LOADED,O.g)}),[]),Object(a.useEffect)((()=>{y.setBreadcrumbs("kibanaDeprecations")}),[y]),Object(a.useEffect)((()=>{C()}),[E,C]),u?Object(p.jsx)(F,{deprecationSource:"Kibana"}):o?Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(p.jsx)(d.d,null,W.isLoading)):0===(null==t?void 0:t.length)?Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(p.jsx)(k,{deprecationType:W.deprecationLabel,navigateToOverviewPage:()=>e.push("/overview")})):Object(p.jsx)("div",{"data-test-subj":"kibanaDeprecations"},Object(p.jsx)(l.EuiPageHeader,{bottomBorder:!0,pageTitle:W.pageTitle,description:W.pageDescription},Object(p.jsx)(L,{totalCriticalDeprecations:M.criticalDeprecations,totalWarningDeprecations:M.warningDeprecations})),Object(p.jsx)(l.EuiSpacer,{size:"l"}),i.length>0&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:W.kibanaDeprecationErrorTitle,color:"warning",iconType:"alert","data-test-subj":"kibanaDeprecationErrors"},Object(p.jsx)("p",null,W.getKibanaDeprecationErrorDescription(i))),Object(p.jsx)(l.EuiSpacer,null)),Object(p.jsx)(B,{deprecations:t,reload:C,toggleFlyout:w,deprecationResolutionState:m}))})),G={permissionsError:m.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.permissionsErrorMessage",{defaultMessage:"You are not authorized to view Elasticsearch deprecation issues."}),partiallyUpgradedWarning:m.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.partiallyUpgradedWarningMessage",{defaultMessage:"Upgrade Kibana to the same version as your Elasticsearch cluster. One or more nodes in the cluster is running a different version than Kibana."}),upgradedMessage:m.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.upgradedWarningMessage",{defaultMessage:"All Elasticsearch nodes have been upgraded."}),loadingError:m.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.loadingErrorMessage",{defaultMessage:"Could not retrieve Elasticsearch deprecation issues."})},K=e=>{var t,s;return 403===e.statusCode?{code:"unauthorized_error",message:G.permissionsError}:426===(null==e?void 0:e.statusCode)&&!1===(null===(t=e.attributes)||void 0===t?void 0:t.allNodesUpgraded)?{code:"partially_upgraded_error",message:G.partiallyUpgradedWarning}:426===(null==e?void 0:e.statusCode)&&!0===(null===(s=e.attributes)||void 0===s?void 0:s.allNodesUpgraded)?{code:"upgraded_error",message:G.upgradedMessage}:{code:"request_error",message:G.loadingError}};var $=s(29);const Y={manualCellLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.defaultDeprecation.manualCellLabel",{defaultMessage:"Manual"}),manualCellTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.manualCellTooltipLabel",{defaultMessage:"This issue needs to be resolved manually."})},V=({resolutionTableCell:e,fieldName:t,deprecation:s,openFlyout:a})=>{var i,r,o;return"isCritical"===t?Object(p.jsx)(w,{isCritical:s.isCritical}):"message"===t?Object(p.jsx)(l.EuiLink,{"data-test-subj":`deprecation-${null!==(r=null===(o=s.correctiveAction)||void 0===o?void 0:o.type)&&void 0!==r?r:"default"}`,onClick:a},s.message):"type"===t?Object(p.jsx)(n.a.Fragment,null,D[s.type]):"correctiveAction"===t?e?Object(p.jsx)(n.a.Fragment,null,e):Object(p.jsx)(l.EuiToolTip,{position:"top",content:Y.manualCellTooltipLabel},Object(p.jsx)(l.EuiText,{size:"s",color:"subdued"},Y.manualCellLabel)):Object(p.jsx)(n.a.Fragment,null,null!==(i=s[t])&&void 0!==i?i:"")},H=Object(a.createContext)(void 0),J=()=>{const e=Object(a.useContext)(H);if(void 0===e)throw new Error("useMlSnapshotContext must be used within a <MlSnapshotsStatusProvider />");return e},Q=({api:e,snapshotId:t,jobId:s,mlUpgradeModeEnabled:n,children:i})=>{const{updateSnapshotStatus:r,snapshotState:o,upgradeSnapshot:l,deleteSnapshot:c}=(({jobId:e,snapshotId:t,api:s})=>{const[n,i]=Object(a.useState)(void 0),[r,o]=Object(a.useState)({status:"idle",jobId:e,snapshotId:t}),l=Object(a.useRef)(null),c=Object(a.useRef)(!1),u=Object(a.useCallback)((()=>{l.current&&(clearTimeout(l.current),l.current=null)}),[]),d=Object(a.useCallback)((async()=>{u();const{data:a,error:n}=await s.getMlSnapshotUpgradeStatus({jobId:e,snapshotId:t});if(n)return o({snapshotId:t,jobId:e,action:"upgrade",status:"error"}),void i(n);o({...a,action:"upgrade"}),"in_progress"===(null==a?void 0:a.status)&&(l.current=setTimeout(d,1e3))}),[s,u,e,t]),p=Object(a.useCallback)((async()=>{o({snapshotId:t,jobId:e,action:"upgrade",status:"in_progress"});const{data:a,error:n}=await s.upgradeMlSnapshot({jobId:e,snapshotId:t});if(n)return i(n),void o({snapshotId:t,jobId:e,action:"upgrade",status:"error"});o({...a,action:"upgrade"}),d()}),[s,e,t,d]),g=Object(a.useCallback)((async()=>{o({snapshotId:t,jobId:e,action:"delete",status:"in_progress"});const{error:a}=await s.deleteMlSnapshot({snapshotId:t,jobId:e});if(a)return i(a),void o({snapshotId:t,jobId:e,action:"delete",status:"error"});o({snapshotId:t,jobId:e,action:"delete",status:"complete"})}),[s,e,t]);return Object(a.useEffect)((()=>(c.current=!0,()=>{c.current=!1,u()})),[u]),{snapshotState:{...r,error:n},upgradeSnapshot:p,updateSnapshotStatus:d,deleteSnapshot:g}})({jobId:s,snapshotId:t,api:e});return Object(a.useEffect)((()=>{r()}),[r]),Object(p.jsx)(H.Provider,{value:{snapshotState:o,upgradeSnapshot:l,deleteSnapshot:c,mlUpgradeModeEnabled:n}},i)},Z={upgradeInProgressText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeInProgressText",{defaultMessage:"Upgrade in progress…"}),deleteInProgressText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deletingButtonLabel",{defaultMessage:"Deletion in progress…"}),upgradeCompleteText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeCompleteText",{defaultMessage:"Upgrade complete"}),deleteCompleteText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deleteCompleteText",{defaultMessage:"Deletion complete"}),upgradeFailedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeFailedText",{defaultMessage:"Upgrade failed"}),deleteFailedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deleteFailedText",{defaultMessage:"Deletion failed"}),resolutionText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.resolutionText",{defaultMessage:"Upgrade or delete snapshots"}),resolutionTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by upgrading or deleting a job model snapshot. This issue can be resolved automatically."})},X=()=>{const{snapshotState:e}=J();return"in_progress"===e.status?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},"delete"===e.action?Z.deleteInProgressText:Z.upgradeInProgressText))):"complete"===e.status?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check",color:"success"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},"delete"===e.action?Z.deleteCompleteText:Z.upgradeCompleteText))):"error"===e.status?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},"delete"===e.action?Z.deleteFailedText:Z.upgradeFailedText))):Object(p.jsx)(l.EuiToolTip,{position:"top",content:Z.resolutionTooltipLabel},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"indexSettings"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Z.resolutionText))))},ee={upgradeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradeButtonLabel",{defaultMessage:"Upgrade"}),upgradingButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradingButtonLabel",{defaultMessage:"Upgrading…"}),retryUpgradeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.retryUpgradeButtonLabel",{defaultMessage:"Retry upgrade"}),closeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.closeButtonLabel",{defaultMessage:"Close"}),deleteButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deleteButtonLabel",{defaultMessage:"Delete"}),deletingButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deletingButtonLabel",{defaultMessage:"Deleting…"}),retryDeleteButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.retryDeleteButtonLabel",{defaultMessage:"Retry delete"}),flyoutTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.title",{defaultMessage:"Upgrade or delete model snapshot"}),deleteSnapshotErrorTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deleteSnapshotErrorTitle",{defaultMessage:"Error deleting snapshot"}),upgradeSnapshotErrorTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradeSnapshotErrorTitle",{defaultMessage:"Error upgrading snapshot"}),upgradeModeEnabledErrorTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledErrorTitle",{defaultMessage:"Machine Learning upgrade mode is enabled"}),upgradeModeEnabledErrorDescription:e=>Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledErrorDescription",defaultMessage:"No actions can be taken on Machine Learning snapshots while upgrade mode is enabled. {docsLink}.",values:{docsLink:Object(p.jsx)(l.EuiLink,{href:e,target:"_blank","data-test-subj":"setUpgradeModeDocsLink"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledDocsLink",defaultMessage:"Learn more"}))}})},te=({deprecation:e,closeFlyout:t,snapshotState:s,upgradeSnapshot:a,deleteSnapshot:i,mlUpgradeModeEnabled:r})=>{const{services:{core:{docLinks:o}}}=j(),c="complete"===s.status;return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(w,{isCritical:e.isCritical,isResolved:c}),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",{id:"mlSnapshotDetailsFlyoutTitle"},ee.flyoutTitle))),Object(p.jsx)(l.EuiFlyoutBody,null,s.error&&!c&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:"delete"===s.action?ee.deleteSnapshotErrorTitle:ee.upgradeSnapshotErrorTitle,color:"danger",iconType:"alert","data-test-subj":"resolveSnapshotError"},s.error.message),Object(p.jsx)(l.EuiSpacer,null)),r&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:ee.upgradeModeEnabledErrorTitle,color:"warning",iconType:"alert","data-test-subj":"mlUpgradeModeEnabledError"},Object(p.jsx)("p",null,ee.upgradeModeEnabledErrorDescription(o.links.ml.setUpgradeMode))),Object(p.jsx)(l.EuiSpacer,null)),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,e.details),Object(p.jsx)("p",null,Object(p.jsx)(I,{documentationUrl:e.url})))),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{onClick:t,flush:"left"},ee.closeButtonLabel)),!c&&!r&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiFlexGroup,null,Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiButtonEmpty,{"data-test-subj":"deleteSnapshotButton",color:"danger",onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.i),i(),t()},isLoading:"delete"===s.action&&"in_progress"===s.status,isDisabled:"in_progress"===s.status},(e=>{if("delete"===e.action){if(e.error)return ee.retryDeleteButtonLabel;switch(e.status){case"in_progress":return ee.deletingButtonLabel;case"idle":default:return ee.deleteButtonLabel}}return ee.deleteButtonLabel})(s))),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiButton,{fill:!0,onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.j),a(),t()},isLoading:"upgrade"===s.action&&"in_progress"===s.status,isDisabled:"in_progress"===s.status,"data-test-subj":"upgradeSnapshotButton"},(e=>{if("upgrade"===e.action){if(e.error)return ee.retryUpgradeButtonLabel;switch(e.status){case"in_progress":return ee.upgradingButtonLabel;case"idle":default:return ee.upgradeButtonLabel}}return ee.upgradeButtonLabel})(s))))))))},{useGlobalFlyout:se}=d.c,ae=({rowFieldNames:e,deprecation:t})=>{const[s,i]=Object(a.useState)(!1),r=J(),{addContent:o,removeContent:c}=se(),u=Object(a.useCallback)((()=>{i(!1),c("mlFlyout")}),[c]);return Object(a.useEffect)((()=>{s&&o({id:"mlFlyout",Component:te,props:{deprecation:t,closeFlyout:u,...r},flyoutProps:{onClose:u,className:"eui-textBreakWord","data-test-subj":"mlSnapshotDetails","aria-labelledby":"mlSnapshotDetailsFlyoutTitle"}})}),[r,o,s,t,u]),Object(p.jsx)(n.a.Fragment,null,e.map((e=>Object(p.jsx)(l.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`mlTableCell-${e}`},Object(p.jsx)(V,{fieldName:e,openFlyout:()=>i(!0),deprecation:t,resolutionTableCell:Object(p.jsx)(X,null)})))))},ne=e=>{const{services:{api:t}}=j();return Object(p.jsx)(Q,{snapshotId:e.deprecation.correctiveAction.snapshotId,jobId:e.deprecation.correctiveAction.jobId,mlUpgradeModeEnabled:e.mlUpgradeModeEnabled,api:t},Object(p.jsx)(ae,e))},ie={deleteInProgressText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deletingButtonLabel",{defaultMessage:"Settings removal in progress…"}),deleteCompleteText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deleteCompleteText",{defaultMessage:"Deprecated settings removed"}),deleteFailedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deleteFailedText",{defaultMessage:"Settings removal failed"}),resolutionText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.resolutionText",{defaultMessage:"Remove settings"}),resolutionTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by removing settings from this index. This issue can be resolved automatically."})},re=({status:e})=>{const{statusType:t}=e;return"in_progress"===t?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},ie.deleteInProgressText))):"complete"===t?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check",color:"success"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},ie.deleteCompleteText))):"error"===t?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},ie.deleteFailedText))):Object(p.jsx)(l.EuiToolTip,{position:"top",content:ie.resolutionTooltipLabel},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"indexSettings"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},ie.resolutionText))))},oe={getFlyoutDescription:e=>m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.secondaryDescription",{defaultMessage:"Index: {indexName}",values:{indexName:e}}),removeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.removeButtonLabel",{defaultMessage:"Remove deprecated settings"}),retryRemoveButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.retryRemoveButtonLabel",{defaultMessage:"Retry removing deprecated settings"}),resolvedButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.resolvedButtonLabel",{defaultMessage:"Resolved"}),closeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.closeButtonLabel",{defaultMessage:"Close"}),getConfirmationText:e=>m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.description",{defaultMessage:"Remove the following deprecated index {indexSettingsCount, plural, one {setting} other {settings}}?",values:{indexSettingsCount:e}}),errorTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.deleteErrorTitle",{defaultMessage:"Error deleting index settings"})},le=({deprecation:e,closeFlyout:t,removeIndexSettings:s,status:i})=>{const{index:r,message:o,details:c,url:u,correctiveAction:d}=e,{statusType:g,details:x}=i,j=["idle","error"].includes(g),b=Object(a.useCallback)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.f),s(r,d.deprecatedSettings)}),[d,r,s]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(w,{isCritical:e.isCritical,isResolved:"complete"===g}),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",{id:"indexSettingsDetailsFlyoutTitle"},o)),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)(l.EuiTextColor,{color:"subdued"},oe.getFlyoutDescription(r))))),Object(p.jsx)(l.EuiFlyoutBody,null,"error"===g&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:oe.errorTitle,color:"danger",iconType:"alert","data-test-subj":"deleteSettingsError"},x.message),Object(p.jsx)(l.EuiSpacer,null)),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,c),Object(p.jsx)("p",null,Object(p.jsx)(I,{documentationUrl:u}))),j&&Object(p.jsx)("div",{"data-test-subj":"removeSettingsPrompt"},Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(l.EuiTitle,{size:"xs"},Object(p.jsx)("h3",null,oe.getConfirmationText(d.deprecatedSettings.length))),Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("ul",null,d.deprecatedSettings.map(((e,t)=>Object(p.jsx)("li",{key:`${e}-${t}`},Object(p.jsx)(l.EuiCode,null,e)))))))),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{onClick:t,flush:"left"},oe.closeButtonLabel)),j&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButton,{fill:!0,"data-test-subj":"deleteSettingsButton",color:"danger",onClick:b},"error"===g?oe.retryRemoveButtonLabel:oe.removeButtonLabel)))))},{useGlobalFlyout:ce}=d.c,ue=({rowFieldNames:e,deprecation:t})=>{const[s,i]=Object(a.useState)(!1),[r,o]=Object(a.useState)({statusType:"idle"}),{services:{api:c}}=j(),{addContent:u,removeContent:d}=ce(),g=Object(a.useCallback)((()=>{i(!1),d("indexSettingsFlyout")}),[d]),x=Object(a.useCallback)((async(e,t)=>{o({statusType:"in_progress"});const{error:s}=await c.updateIndexSettings(e,t);o({statusType:s?"error":"complete",details:null!=s?s:void 0}),g()}),[c,g]);return Object(a.useEffect)((()=>{s&&u({id:"indexSettingsFlyout",Component:le,props:{closeFlyout:g,deprecation:t,removeIndexSettings:x,status:r},flyoutProps:{onClose:g,className:"eui-textBreakWord","data-test-subj":"indexSettingsDetails","aria-labelledby":"indexSettingsDetailsFlyoutTitle"}})}),[u,t,x,s,g,r]),Object(p.jsx)(n.a.Fragment,null,e.map((e=>Object(p.jsx)(l.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`indexSettingsTableCell-${e}`},Object(p.jsx)(V,{fieldName:e,openFlyout:()=>i(!0),deprecation:t,resolutionTableCell:Object(p.jsx)(re,{status:r})})))))},de={getFlyoutDescription:e=>m.i18n.translate("xpack.upgradeAssistant.esDeprecations.deprecationDetailsFlyout.secondaryDescription",{defaultMessage:"Index: {indexName}",values:{indexName:e}}),closeButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.deprecationDetailsFlyout.closeButtonLabel",{defaultMessage:"Close"})},pe=({deprecation:e,closeFlyout:t})=>{const{message:s,url:a,details:i,index:r}=e;return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(w,{isCritical:e.isCritical,isResolved:!1}),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",{id:"defaultDeprecationDetailsFlyoutTitle"},s)),r&&Object(p.jsx)(l.EuiText,{"data-test-subj":"flyoutDescription"},Object(p.jsx)("p",null,Object(p.jsx)(l.EuiTextColor,{color:"subdued"},de.getFlyoutDescription(r))))),Object(p.jsx)(l.EuiFlyoutBody,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",{className:"eui-textBreakWord"},i),Object(p.jsx)("p",null,Object(p.jsx)(I,{documentationUrl:a})))),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{onClick:t,flush:"left"},de.closeButtonLabel)))))},{useGlobalFlyout:ge}=d.c,xe=({rowFieldNames:e,deprecation:t})=>{const[s,i]=Object(a.useState)(!1),{addContent:r,removeContent:o}=ge(),c=Object(a.useCallback)((()=>{i(!1),o("deprecationDetails")}),[o]);return Object(a.useEffect)((()=>{s&&r({id:"deprecationDetails",Component:pe,props:{deprecation:t,closeFlyout:c},flyoutProps:{onClose:c,className:"eui-textBreakWord","data-test-subj":"defaultDeprecationDetails","aria-labelledby":"defaultDeprecationDetailsFlyoutTitle"}})}),[r,c,t,s]),Object(p.jsx)(n.a.Fragment,null,e.map((e=>Object(p.jsx)(l.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`defaultTableCell-${e}`},Object(p.jsx)(V,{fieldName:e,deprecation:t,openFlyout:()=>i(!0)})))))};let je,be;!function(e){e[e.created=0]="created",e[e.readonly=20]="readonly",e[e.newIndexCreated=30]="newIndexCreated",e[e.reindexStarted=40]="reindexStarted",e[e.reindexCompleted=50]="reindexCompleted",e[e.aliasCreated=60]="aliasCreated"}(je||(je={})),function(e){e[e.inProgress=0]="inProgress",e[e.completed=1]="completed",e[e.failed=2]="failed",e[e.paused=3]="paused",e[e.cancelled=4]="cancelled",e[e.fetchFailed=5]="fetchFailed"}(be||(be={}));s(50),s(51);const fe=e=>e>u.i?`${u.i}+`:e.toString(),me=(e,t)=>{let s=0;switch(t){case je.created:s=0;break;case je.readonly:s=5;break;case je.newIndexCreated:s=10;break;case je.reindexStarted:s=null!==e?10+Math.round(85*e):10;break;case je.reindexCompleted:s=95;break;case je.aliasCreated:s=100}return`${s}%`};let he,Oe;!function(e){e[e.Loading=0]="Loading",e[e.Success=1]="Success",e[e.Error=2]="Error"}(he||(he={})),function(e){e[e.Requested=0]="Requested",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Error=3]="Error"}(Oe||(Oe={}));const ve=(e,{reindexOp:t,warnings:s,hasRequiredPrivileges:a})=>{const n={...e,loadingState:he.Success};return s&&(n.reindexWarnings=s),void 0!==a&&(n.hasRequiredPrivileges=a),t&&(n.lastCompletedStep=t.lastCompletedStep,n.status=t.status,n.reindexTaskPercComplete=t.reindexTaskPercComplete,n.errorMessage=t.errorMessage,e.cancelLoadingState!==Oe.Requested&&e.cancelLoadingState!==Oe.Loading||t.status!==be.cancelled?e.cancelLoadingState===Oe.Requested&&t.status===be.inProgress&&(n.cancelLoadingState=Oe.Loading):n.cancelLoadingState=Oe.Success),n},Ee=Object(a.createContext)(void 0),ke=()=>{const e=Object(a.useContext)(Ee);if(void 0===e)throw new Error("useReindexContext must be used within a <ReindexStatusProvider />");return e},ye=({api:e,indexName:t,children:s})=>{const{reindexState:n,startReindex:i,cancelReindex:r,updateStatus:o}=(({indexName:e,api:t})=>{const[s,n]=Object(a.useState)({loadingState:he.Loading,errorMessage:null,reindexTaskPercComplete:null}),i=Object(a.useRef)(null),r=Object(a.useRef)(!1),o=Object(a.useCallback)((()=>{i.current&&(clearTimeout(i.current),i.current=null)}),[]),l=Object(a.useCallback)((async()=>{o();const{data:s,error:a}=await t.getReindexStatus(e);a?n((e=>({...e,loadingState:he.Error,errorMessage:a.message.toString(),status:be.fetchFailed}))):(n((e=>ve(e,s))),s.reindexOp&&s.reindexOp.status===be.inProgress&&(i.current=setTimeout(l,1e3)))}),[o,t,e]),c=Object(a.useCallback)((async()=>{n((e=>({...e,lastCompletedStep:e.status===be.paused?e.lastCompletedStep:void 0,status:be.inProgress,reindexTaskPercComplete:null,errorMessage:null,cancelLoadingState:void 0})));const{data:s,error:a}=await t.startReindexTask(e);a?n((e=>({...e,loadingState:he.Error,errorMessage:a.message.toString(),status:be.failed}))):(n((e=>ve(e,{reindexOp:s}))),l())}),[t,e,l]),u=Object(a.useCallback)((async()=>{n((e=>({...e,cancelLoadingState:Oe.Requested})));const{error:s}=await t.cancelReindexTask(e);s&&n((e=>({...e,cancelLoadingState:Oe.Error})))}),[t,e]);return Object(a.useEffect)((()=>(r.current=!0,()=>{r.current=!1,o()})),[o]),{reindexState:s,startReindex:c,cancelReindex:u,updateStatus:l}})({indexName:t,api:e});return Object(a.useEffect)((()=>{o()}),[]),Object(p.jsx)(Ee.Provider,{value:{reindexState:n,startReindex:i,cancelReindex:r}},s)},Se={reindexLoadingStatusText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexLoadingStatusText",{defaultMessage:"Loading status…"}),reindexInProgressText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexInProgressText",{defaultMessage:"Reindexing in progress…"}),reindexCompleteText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexCompleteText",{defaultMessage:"Reindex complete"}),reindexFailedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexFailedText",{defaultMessage:"Reindex failed"}),reindexFetchFailedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexFetchFailedText",{defaultMessage:"Reindex status not available"}),reindexCanceledText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexCanceledText",{defaultMessage:"Reindex cancelled"}),reindexPausedText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexPausedText",{defaultMessage:"Reindex paused"}),resolutionText:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.resolutionLabel",{defaultMessage:"Reindex"}),resolutionTooltipLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by reindexing this index. This issue can be resolved automatically."})},Te=()=>{const{reindexState:e}=ke();if(e.loadingState===he.Loading)return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexLoadingStatusText)));switch(e.status){case be.inProgress:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexInProgressText," ",me(e.reindexTaskPercComplete,e.lastCompletedStep))));case be.completed:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check",color:"success"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexCompleteText)));case be.failed:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexFailedText)));case be.fetchFailed:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexFetchFailedText)));case be.paused:return Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.reindexPausedText)))}return Object(p.jsx)(l.EuiToolTip,{position:"top",content:Se.resolutionTooltipLabel},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"indexSettings"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiText,{size:"s"},Se.resolutionText))))};var Ce=s(37),Le=s.n(Ce),Me=s(30),we=s.n(Me);s(53);const Fe=({status:e,idx:t})=>{if("incomplete"===e)return Object(p.jsx)("span",{className:"upgStepProgress__status"},t+1,".");if("inProgress"===e)return Object(p.jsx)(l.EuiLoadingSpinner,{size:"m",className:"upgStepProgress__status"});if("complete"===e)return Object(p.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-complete"},Object(p.jsx)(l.EuiIcon,{type:"check",size:"s"}));if("paused"===e)return Object(p.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-paused"},Object(p.jsx)(l.EuiIcon,{type:"pause",size:"s"}));if("cancelled"===e)return Object(p.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-cancelled"},Object(p.jsx)(l.EuiIcon,{type:"cross",size:"s"}));if("failed"===e)return Object(p.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-failed"},Object(p.jsx)(l.EuiIcon,{type:"cross",size:"s"}));throw new Error(`Unsupported status: ${e}`)},Ie=({title:e,status:t,children:s,idx:n})=>{const i=we()("upgStepProgress__title",{"upgStepProgress__title--currentStep":"inProgress"===t});return Object(p.jsx)(a.Fragment,null,Object(p.jsx)("div",{className:"upgStepProgress__step"},Object(p.jsx)(Fe,{status:t,idx:n}),Object(p.jsx)("div",{className:i},e)),s&&Object(p.jsx)("div",{className:"upgStepProgress__content"},s))},De=({steps:e})=>Object(p.jsx)("div",{className:"upgStepProgress__container"},e.map(((e,t)=>Object(p.jsx)(Ie,Le()({key:t},e,{idx:t}))))),Ae=({errorMessage:e})=>Object(p.jsx)(l.EuiCallOut,{color:"danger",title:"There was an error"},Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,e))),_e=()=>Object(p.jsx)(l.EuiCallOut,{color:"warning",title:"This step was paused due to a Kibana restart. Click 'Resume' below to continue."}),Pe=({reindexState:{lastCompletedStep:e,status:t,cancelLoadingState:s},cancelReindex:a})=>{if(t===be.cancelled)return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelledTitle",defaultMessage:"Reindexing cancelled."}));const i=t===be.inProgress&&(e===je.newIndexCreated||e===je.reindexStarted),r=t===be.inProgress&&e===je.reindexStarted;let c;switch(s){case Oe.Requested:case Oe.Loading:c=Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancellingLabel",defaultMessage:"Cancelling…"});break;case Oe.Success:c=Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelledLabel",defaultMessage:"Cancelled"});break;case Oe.Error:c=Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.errorLabel",defaultMessage:"Could not cancel"});break;default:c=Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelLabel",defaultMessage:"Cancel"})}return Object(p.jsx)(l.EuiFlexGroup,{component:"span"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},i?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.reindexingDocumentsStepTitle",defaultMessage:"Reindexing documents."}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.reindexingDocumentsStepTitle",defaultMessage:"Reindex documents."})),r&&Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiLink,{"data-test-subj":"cancelReindexingDocumentsButton",onClick:a,disabled:void 0!==s},c)))},Re=Object.values(je).sort(),Be=(e,t)=>e===je.readonly?t?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.readonlyStepTitle",defaultMessage:"Setting original index to read-only."}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.readonlyStepTitle",defaultMessage:"Set original index to read-only."}):e===je.newIndexCreated?t?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.createIndexStepTitle",defaultMessage:"Creating new index."}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.createIndexStepTitle",defaultMessage:"Create new index."}):e===je.aliasCreated?t?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.aliasSwapStepTitle",defaultMessage:"Swapping original index with alias."}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasSwapStepTitle",defaultMessage:"Swap original index with alias."}):void 0,ze=e=>{const{errorMessage:t,lastCompletedStep:s=-1,status:a,reindexTaskPercComplete:i}=e.reindexState,r=e=>{const n=Re[Re.indexOf(e)-1];return a===be.failed&&s===n?{title:Be(e),status:"failed",children:Object(p.jsx)(Ae,{errorMessage:t})}:a===be.paused&&s===n?{title:Be(e),status:"paused",children:Object(p.jsx)(_e,null)}:a===be.cancelled&&s===n?{title:Be(e),status:"cancelled"}:void 0===a||s<n?{title:Be(e),status:"incomplete"}:s===n?{title:Be(e,!0),status:"inProgress"}:{title:Be(e),status:"complete"}},c={title:Object(p.jsx)(Pe,e)};a!==be.failed||s!==je.newIndexCreated&&s!==je.reindexStarted?a!==be.paused||s!==je.newIndexCreated&&s!==je.reindexStarted?a!==be.cancelled||s!==je.newIndexCreated&&s!==je.reindexStarted?void 0===a||s<je.newIndexCreated?c.status="incomplete":s===je.newIndexCreated||s===je.reindexStarted?c.status="inProgress":c.status="complete":c.status="cancelled":(c.status="paused",c.children=Object(p.jsx)(_e,null)):(c.status="failed",c.children=Object(p.jsx)(Ae,{errorMessage:t}));const u=[r(je.readonly),r(je.newIndexCreated),c,r(je.aliasCreated)];return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiTitle,{size:"xs","data-test-subj":"reindexChecklistTitle"},Object(p.jsx)("h3",null,a===be.inProgress?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingInProgressTitle",defaultMessage:"Reindexing in progress… {percents}",values:{percents:me(i,s)}}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklistTitle",defaultMessage:"Reindexing process"}))),Object(p.jsx)(De,{steps:u}))},Ue=({closeFlyout:e,reindexState:t,startReindex:s,cancelReindex:i})=>{const{services:{core:{docLinks:r}}}=j(),{loadingState:c,status:u,hasRequiredPrivileges:d}=t,g=c===he.Loading||u===be.inProgress,x=u===be.completed,b=u===be.fetchFailed,f=u===be.failed;return Object(p.jsx)(a.Fragment,null,Object(p.jsx)(l.EuiFlyoutBody,null,!1===d&&Object(p.jsx)(a.Fragment,null,Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(l.EuiCallOut,{title:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.insufficientPrivilegeCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to reindex this index"}),color:"danger",iconType:"alert"})),(b||f)&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(l.EuiCallOut,{color:"danger",iconType:"alert","data-test-subj":b?"fetchFailedCallout":"reindexingFailedCallout",title:b?Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.fetchFailedCalloutTitle",defaultMessage:"Reindex status not available"}):Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingFailedCalloutTitle",defaultMessage:"Reindexing error"})},t.errorMessage)),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexDescription",defaultMessage:"The index will be read-only during reindexing. You won't be able to add, update, or delete documents until reindexing is complete. If you need to reindex to a new cluster, use the reindex API. {docsLink}",values:{docsLink:Object(p.jsx)(l.EuiLink,{target:"_blank",href:r.links.upgradeAssistant.remoteReindex},m.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.learnMoreLinkLabel",{defaultMessage:"Learn more"}))}})),Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.backgroundResumeDetail",defaultMessage:"Reindexing is performed in the background. You can return to the Upgrade Assistant to view progress or resume reindexing after a Kibana restart."}))),Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(ze,{reindexState:t,cancelReindex:i})),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.closeButtonLabel",defaultMessage:"Close"}))),!b&&!x&&d&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButton,{fill:!0,color:u===be.paused?"warning":"primary",iconType:u===be.paused?"play":void 0,onClick:s,isLoading:g,disabled:g||!d,"data-test-subj":"startReindexingButton"},(e=>{switch(e){case be.failed:return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.tryAgainLabel",defaultMessage:"Try again"});case be.inProgress:return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.reindexingLabel",defaultMessage:"Reindexing…"});case be.paused:return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.resumeLabel",defaultMessage:"Resume reindexing"});case be.cancelled:return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.restartLabel",defaultMessage:"Restart reindexing"});default:return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.runReindexLabel",defaultMessage:"Start reindexing"})}})(u))))))},Ne=({isChecked:e,warningId:t,label:s,onChange:a,description:i,documentationUrl:r})=>Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiCheckbox,{id:t,label:Object(p.jsx)("strong",null,s),checked:e,onChange:a})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLink,{href:r,target:"_blank",external:!1},Object(p.jsx)(l.EuiIconTip,{content:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.documentationLinkLabel",defaultMessage:"Documentation"}),position:"right",type:"help"})))),Object(p.jsx)(l.EuiSpacer,{size:"xs"}),i),Object(p.jsx)(l.EuiSpacer,null)),We={customTypeName:({isChecked:e,onChange:t,docLinks:s,id:a,meta:n})=>Object(p.jsx)(Ne,{isChecked:e,onChange:t,warningId:a,label:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningTitle",defaultMessage:"Replace mapping type {mappingType} with {defaultType}",values:{mappingType:Object(p.jsx)(l.EuiCode,null,n.typeName),defaultType:Object(p.jsx)(l.EuiCode,null,"_doc")}}),description:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningDetail",defaultMessage:"Mapping types are no longer supported in Elastic 8.x. Ensure no application code or scripts rely on {mappingType}.",values:{mappingType:Object(p.jsx)(l.EuiCode,null,n.typeName)}}),documentationUrl:s.elasticsearch.typesRemoval}),indexSetting:({isChecked:e,onChange:t,docLinks:s,id:a,meta:i})=>Object(p.jsx)(Ne,{isChecked:e,onChange:t,warningId:a,label:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningTitle",defaultMessage:"Remove deprecated index settings"}),description:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningDetail",defaultMessage:"The following deprecated index settings were detected:"}),Object(p.jsx)(l.EuiSpacer,{size:"xs"}),Object(p.jsx)("ul",null,i.deprecatedSettings.map(((e,t)=>Object(p.jsx)("li",{key:`${e}-${t}`},Object(p.jsx)(l.EuiCode,null,e)))))),documentationUrl:s.elasticsearch.indexModules})},qe=e=>`reindexWarning-${e}`,Ge=({warnings:e,hideWarningsStep:t,continueReindex:s})=>{const{services:{core:{docLinks:i}}}=j(),{links:r}=i,[c,u]=Object(a.useState)(e.reduce(((e,t,s)=>(e[qe(s)]=!1,e)),{})),d=Object.values(c).filter((e=>e)).length<e.length,g=e=>{const t=e.target.id;u((e=>({...e,[t]:!c[t]})))};return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutBody,null,e.length>0&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiCallOut,{title:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutTitle",defaultMessage:"This index requires destructive changes that cannot be reversed"}),color:"warning",iconType:"alert"},Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutDetail",defaultMessage:"Back up the index before continuing. To proceed with the reindex, accept each change."}))),Object(p.jsx)(l.EuiSpacer,null),Object(p.jsx)(l.EuiTitle,{size:"s"},Object(p.jsx)("h3",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.acceptChangesTitle",defaultMessage:"Accept changes"}))),Object(p.jsx)(l.EuiSpacer,null),e.map(((e,t)=>{const s=We[e.warningType];return Object(p.jsx)(s,{key:qe(t),isChecked:c[qe(t)],onChange:g,docLinks:r,id:qe(t),meta:e.meta})})))),Object(p.jsx)(l.EuiFlyoutFooter,null,Object(p.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{iconType:"arrowLeft",onClick:t,flush:"left"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.cancelButtonLabel",defaultMessage:"Back"}))),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButton,{fill:!0,color:"primary",onClick:s,disabled:d},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.continueButtonLabel",defaultMessage:"Continue reindexing"}))))))},Ke=({reindexState:e,startReindex:t,cancelReindex:s,closeFlyout:i,deprecation:r})=>{var c;const{status:u,reindexWarnings:d}=e,{index:g}=r,[x,j]=Object(a.useState)(!1),b=Object(a.useCallback)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.o),t()}),[t]),f=Object(a.useCallback)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.p),s()}),[s]),m=x?Object(p.jsx)(Ge,{warnings:null!==(c=e.reindexWarnings)&&void 0!==c?c:[],hideWarningsStep:()=>j(!1),continueReindex:()=>{j(!1),b()}}):Object(p.jsx)(Ue,{closeFlyout:i,startReindex:()=>{d&&d.length>0&&u!==be.inProgress&&u!==be.completed?j(!0):b()},reindexState:e,cancelReindex:f});return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(w,{isCritical:r.isCritical,isResolved:u===be.completed}),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(p.jsx)("h2",{id:"reindexDetailsFlyoutTitle"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.flyoutHeader",defaultMessage:"Reindex {index}",values:{index:g}})))),m)},{useGlobalFlyout:$e}=d.c,Ye=({rowFieldNames:e,deprecation:t})=>{const[s,i]=Object(a.useState)(!1),r=ke(),{addContent:o,removeContent:c}=$e(),u=Object(a.useCallback)((async()=>{c("reindexFlyout"),i(!1),O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.m)}),[c]);return Object(a.useEffect)((()=>{s&&o({id:"reindexFlyout",Component:Ke,props:{deprecation:t,closeFlyout:u,...r},flyoutProps:{onClose:u,className:"eui-textBreakWord","data-test-subj":"reindexDetails","aria-labelledby":"reindexDetailsFlyoutTitle"}})}),[o,t,s,r,u]),Object(a.useEffect)((()=>{s&&O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.n)}),[s]),Object(p.jsx)(n.a.Fragment,null,e.map((e=>Object(p.jsx)(l.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`reindexTableCell-${e}`},Object(p.jsx)(V,{fieldName:e,openFlyout:()=>i(!0),deprecation:t,resolutionTableCell:Object(p.jsx)(Te,null)})))))},Ve=e=>{const{services:{api:t}}=j();return Object(p.jsx)(ye,{indexName:e.deprecation.index,api:t},Object(p.jsx)(Ye,e))},He={refreshButtonLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.refreshButtonLabel",{defaultMessage:"Refresh"}),noDeprecationsMessage:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.noDeprecationsMessage",{defaultMessage:"No Elasticsearch deprecation issues found"}),typeFilterLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.typeFilterLabel",{defaultMessage:"Type"}),criticalFilterLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.criticalFilterLabel",{defaultMessage:"Critical"}),searchPlaceholderLabel:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.searchPlaceholderLabel",{defaultMessage:"Filter"})},Je={isCritical:{label:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.statusColumnTitle",{defaultMessage:"Status"}),width:"8px"},message:{label:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.issueColumnTitle",{defaultMessage:"Issue"}),width:"36px"},type:{label:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.typeColumnTitle",{defaultMessage:"Type"}),width:"10px"},index:{label:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.nameColumnTitle",{defaultMessage:"Name"}),width:"24px"},correctiveAction:{label:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.resolutionColumnTitle",{defaultMessage:"Resolution"}),width:"24px"}},Qe=Object.keys(Je),Ze=A.pageSizeOptions,Xe=(e,t)=>{const{isSortAscending:s,sortField:a}=t,n=Object($.sortBy)(e,[e=>"isCritical"===a?!0!==e.isCritical:e[a]]);return s?n:n.reverse()},et=({deprecations:e=[],reload:t})=>{const{services:{api:s}}=j(),{data:i}=s.useLoadMlUpgradeMode(),r=!(null==i||!i.mlUpgradeModeEnabled),[o,c]=Object(a.useState)({isSortAscending:!0,sortField:"isCritical"}),[u,d]=Object(a.useState)(A.initialPageSize),[g,x]=Object(a.useState)(0),[b,f]=Object(a.useState)(l.EuiSearchBar.Query.MATCH_ALL),[m,h]=Object(a.useState)(void 0),[O,v]=Object(a.useState)(Xe(e,o)),E=Object(a.useMemo)((()=>new l.Pager(e.length,u,g)),[g,e,u]),k=Object(a.useMemo)((()=>O.slice(E.firstItemIndex,E.lastItemIndex+1)),[O,E]),y=Object(a.useCallback)((e=>{const t={isSortAscending:o.sortField!==e||!o.isSortAscending,sortField:e};c(t)}),[o]),S=Object(a.useCallback)((({query:e,error:t})=>{t?h(t):(h(void 0),f(e))}),[]);return Object(a.useEffect)((()=>{const{setTotalItems:t,goToPageIndex:s}=E,a=l.EuiSearchBar.Query.execute(b,e),n=Xe(a,o);t(n.length),v(n),n.length!==O.length&&s(0)}),[e,o,E,b,O.length]),Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"m"},Object(p.jsx)(l.EuiFlexItem,{"data-test-subj":"searchBarContainer"},Object(p.jsx)(l.EuiSearchBar,{box:{placeholder:He.searchPlaceholderLabel,incremental:!0},filters:[{type:"is",field:"isCritical",name:He.criticalFilterLabel},{type:"field_value_selection",field:"type",name:He.typeFilterLabel,multiSelect:!1,options:Object.keys(D).map((e=>({value:e,name:D[e]})))}],onChange:S})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButton,{iconType:"refresh",onClick:t,"data-test-subj":"refreshButton",key:"refreshButton"},He.refreshButtonLabel))),m&&Object(p.jsx)("div",{"data-test-subj":"invalidSearchQueryMessage"},Object(p.jsx)(l.EuiSpacer,{size:"l"}),Object(p.jsx)(l.EuiCallOut,{iconType:"alert",color:"danger",title:`Invalid search: ${m.message}`})),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(l.EuiTable,{"data-test-subj":"esDeprecationsTable"},Object(p.jsx)(l.EuiTableHeader,null,Object.entries(Je).map((([e,t])=>Object(p.jsx)(l.EuiTableHeaderCell,{width:t.width,key:t.label,onSort:()=>y(e),isSorted:o.sortField===e,isSortAscending:o.isSortAscending},t.label)))),0===O.length?Object(p.jsx)(l.EuiTableBody,null,Object(p.jsx)(l.EuiTableRow,{"data-test-subj":"noDeprecationsRow"},Object(p.jsx)(l.EuiTableRowCell,{align:"center",colSpan:Qe.length,isMobileFullWidth:!0},He.noDeprecationsMessage))):Object(p.jsx)(l.EuiTableBody,null,k.map(((e,t)=>Object(p.jsx)(l.EuiTableRow,{"data-test-subj":"deprecationTableRow",key:`deprecation-row-${t}`},((e,t)=>{var s;switch(null===(s=e.correctiveAction)||void 0===s?void 0:s.type){case"mlSnapshot":return Object(p.jsx)(ne,{deprecation:e,rowFieldNames:Qe,mlUpgradeModeEnabled:t});case"indexSetting":return Object(p.jsx)(ue,{deprecation:e,rowFieldNames:Qe});case"reindex":return Object(p.jsx)(Ve,{deprecation:e,rowFieldNames:Qe});default:return Object(p.jsx)(xe,{deprecation:e,rowFieldNames:Qe})}})(e,r)))))),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(l.EuiTablePagination,{"data-test-subj":"esDeprecationsPagination",activePage:E.getCurrentPageIndex(),itemsPerPage:E.itemsPerPage,itemsPerPageOptions:Ze,pageCount:E.getTotalPages(),onChangeItemsPerPage:d,onChangePage:x}))},tt={pageTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageTitle",{defaultMessage:"Elasticsearch deprecation issues"}),pageDescription:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageDescription",{defaultMessage:"Resolve all critical issues before upgrading to the next major version of Elastic. Before making changes, make sure you have a current snapshot of your cluster. To upgrade to 8.x, you must reindex or remove indices created before 7.0."}),isLoading:m.i18n.translate("xpack.upgradeAssistant.esDeprecations.loadingText",{defaultMessage:"Loading deprecation issues…"})},st=e=>Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.batchReindexingDocsDescription",defaultMessage:"To start multiple reindexing tasks in a single request, use the Kibana {docsLink}.",values:{docsLink:Object(p.jsx)(l.EuiLink,{href:e.links.upgradeAssistant.batchReindex,target:"_blank",external:!0},m.i18n.translate("xpack.upgradeAssistant.esDeprecations.batchReindexingDocsLink",{defaultMessage:"batch reindexing API"}))}}),at=Object(r.withRouter)((({history:e})=>{var t;const{services:{api:s,breadcrumbs:i,core:{docLinks:r}}}=j(),{data:o,isLoading:c,error:u,resendRequest:g}=s.useLoadEsDeprecations(),x=Object(a.useMemo)((()=>(e=>{const t=[],s=[];return e.forEach((e=>{e.isCritical?t.push(e):s.push(e)})),{criticalDeprecations:t.length,warningDeprecations:s.length}})((null==o?void 0:o.deprecations)||[])),[null==o?void 0:o.deprecations]);return Object(a.useEffect)((()=>{i.setBreadcrumbs("esDeprecations")}),[i]),Object(a.useEffect)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.LOADED,O.d)}),[]),u?Object(p.jsx)(F,{deprecationSource:"Elasticsearch",message:K(u).message}):c?Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(p.jsx)(d.d,null,tt.isLoading)):0===(null==o||null===(t=o.deprecations)||void 0===t?void 0:t.length)?Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(p.jsx)(k,{deprecationType:"Elasticsearch",navigateToOverviewPage:()=>e.push("/overview")})):Object(p.jsx)("div",{"data-test-subj":"esDeprecationsContent"},Object(p.jsx)(l.EuiPageHeader,{pageTitle:tt.pageTitle,description:Object(p.jsx)(n.a.Fragment,null,tt.pageDescription," ",st(r))},Object(p.jsx)(L,{totalCriticalDeprecations:x.criticalDeprecations,totalWarningDeprecations:x.warningDeprecations})),Object(p.jsx)(l.EuiSpacer,{size:"l"}),Object(p.jsx)(et,{deprecations:null==o?void 0:o.deprecations,reload:g}))}));var nt=s(31);const it=({checkpoint:e})=>{const{services:{data:t},plugins:{share:s}}=j(),[n,i]=Object(a.useState)();return Object(a.useEffect)((()=>{(async()=>{const a=await(async e=>{const t=(await e.dataViews.find(u.g)).find((e=>e.title===u.g));if(t)return t.id;{const t=!1,s=!0;return(await e.dataViews.createAndSave({title:u.g,allowNoIndex:!0},t,s)).id}})(t),n=s.url.locators.get("DISCOVER_APP_LOCATOR");if(!n)return;const r=await n.getUrl({indexPatternId:a,query:{language:"kuery",query:`@timestamp > "${e}"`}});i(r)})()}),[t,e,s.url.locators]),Object(p.jsx)(l.EuiLink,{href:n,onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.c)},"data-test-subj":"viewDiscoverLogs"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.viewDiscoverResultsAction",defaultMessage:"Analyze logs in Discover"}))},rt=({checkpoint:e})=>{var t;const{services:{core:{http:s}}}=j(),a=null==s||null===(t=s.basePath)||void 0===t?void 0:t.prepend(`/app/logs/stream?sourceId=${u.h}&logPosition=(end:now,start:${Object(nt.encode)(e)})`);return Object(p.jsx)(l.EuiLink,{href:a,onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.k)},"data-test-subj":"viewObserveLogs"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.viewObservabilityResultsAction",defaultMessage:"View deprecation logs in Observability"}))},ot=({checkpoint:e})=>{const{infra:t}=j().plugins;return Object(p.jsx)(l.EuiFlexGroup,null,t&&Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiPanel,null,Object(p.jsx)(l.EuiText,{size:"s"},Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.observe.observabilityDescription",defaultMessage:"Get insight into which deprecated APIs are being used and what applications you need to update."}))),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(rt,{checkpoint:e}))),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiPanel,null,Object(p.jsx)(l.EuiText,{size:"s"},Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.observe.discoveryDescription",defaultMessage:"Search and filter the deprecation logs to understand the types of changes you need to make."}))),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(it,{checkpoint:e}))))};var lt=s(27),ct=s.n(lt);const ut={calloutTitle:(e,t)=>Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.verifyChanges.calloutTitle",defaultMessage:"{warningsCount, plural, =0 {No} other {{warningsCount}}} deprecation {warningsCount, plural, one {issue} other {issues}} since {previousCheck}",values:{warningsCount:e,previousCheck:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.FormattedDate,{value:t,year:"numeric",month:"long",day:"2-digit"})," ",Object(p.jsx)(o.FormattedTime,{value:t,timeZoneName:"short",hour12:!1}))}}),calloutBody:m.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.calloutBody",{defaultMessage:"After making changes, reset the counter and continue monitoring to verify you're no longer using deprecated features."}),loadingError:m.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.loadingError",{defaultMessage:"An error occurred while retrieving the count of deprecation logs"}),retryButton:m.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.retryButton",{defaultMessage:"Try again"}),resetCounterButton:m.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.resetCounterButton",{defaultMessage:"Reset counter"}),errorToastTitle:m.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.errorToastTitle",{defaultMessage:"Could not delete deprecation logs cache"})},dt=({checkpoint:e,setCheckpoint:t})=>{const[s,n]=Object(a.useState)(!1),{services:{api:i,core:{notifications:r}}}=j(),{data:o,error:c,isLoading:u,resendRequest:d,isInitialRequest:g}=i.getDeprecationLogsCount(e),x=(null==o?void 0:o.count)||0,b=x>0,f=b?"warning":"success",m=b?"alert":"check",v=b?"hasWarningsCallout":"noWarningsCallout";return g&&u?Object(p.jsx)(l.EuiLoadingContent,{lines:6}):c?Object(p.jsx)(l.EuiCallOut,{title:ut.loadingError,color:"danger",iconType:"alert","data-test-subj":"errorCallout"},Object(p.jsx)("p",null,c.statusCode," - ",c.message),Object(p.jsx)(l.EuiButton,{color:"danger",onClick:d,"data-test-subj":"retryButton"},ut.retryButton)):Object(p.jsx)(l.EuiCallOut,{title:ut.calloutTitle(x,e),color:f,iconType:m,"data-test-subj":v},Object(p.jsx)("p",null,ut.calloutBody),Object(p.jsx)(l.EuiButton,{color:f,onClick:async()=>{n(!0);const{error:e}=await i.deleteDeprecationLogsCache();if(n(!1),e)return void r.toasts.addDanger({title:ut.errorToastTitle,text:e.message.toString()});const s=ct()().toISOString();O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.q),t(s)},isLoading:s||u,"data-test-subj":"resetLastStoredDate"},ut.resetCounterButton))},pt={enabledMessage:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.enabledToastMessage",{defaultMessage:"Deprecated API requests will be logged and indexed."}),disabledMessage:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.disabledToastMessage",{defaultMessage:"Deprecated API requests will not be logged."})};s(62);const gt={fetchErrorMessage:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.fetchErrorMessage",{defaultMessage:"Could not retrieve logging information."}),reloadButtonLabel:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.reloadButtonLabel",{defaultMessage:"Try again"}),updateErrorMessage:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.updateErrorMessage",{defaultMessage:"Could not update logging state."}),errorLabel:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.errorLabel",{defaultMessage:"Error"}),buttonLabel:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.buttonLabel",{defaultMessage:"Enable deprecation log collection"}),loadingLogsLabel:m.i18n.translate("xpack.upgradeAssistant.overview.loadingLogsLabel",{defaultMessage:"Loading deprecation log collection state…"})},xt=({error:e})=>{const[t,s]=Object(a.useState)(!1);if(!e.statusCode||!e.message)return null;const n=Object(p.jsx)(l.EuiLink,{color:"danger",onClick:()=>s(!t)},gt.errorLabel," ",e.statusCode);return Object(p.jsx)(l.EuiPopover,{button:n,isOpen:t,closePopover:()=>s(!1)},Object(p.jsx)(l.EuiText,{style:{width:300}},Object(p.jsx)("p",null,e.message)))},jt=({isDeprecationLogIndexingEnabled:e,isLoading:t,isUpdating:s,fetchError:a,updateError:n,resendRequest:i,toggleLogging:r})=>t?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center",className:"upgToggleLoading"},Object(p.jsx)(l.EuiFlexItem,{grow:!1,className:"upgLoadingItem"},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},gt.loadingLogsLabel)):a?Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"flexEnd","data-test-subj":"fetchLoggingError"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiTextColor,{color:"danger"},gt.fetchErrorMessage)),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(xt,{error:a})))),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiButtonEmpty,{iconType:"refresh",onClick:i},gt.reloadButtonLabel))):Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiSwitch,{"data-test-subj":"deprecationLoggingToggle",label:gt.buttonLabel,checked:!!e,onChange:r,disabled:Boolean(a)||s})),n&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"flexEnd","data-test-subj":"updateLoggingError"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiTextColor,{color:"danger"},gt.updateErrorMessage)),Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(xt,{error:n})))),s&&Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiLoadingSpinner,{size:"m"}))),bt="kibana.upgradeAssistant.lastCheckpoint",ft=new d.e(window.localStorage),mt={analyzeTitle:m.i18n.translate("xpack.upgradeAssistant.overview.analyzeTitle",{defaultMessage:"Analyze deprecation logs"}),deprecationsCountCheckpointTitle:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationsCountCheckpointTitle",{defaultMessage:"Resolve deprecation issues and verify your changes"}),apiCompatibilityNoteTitle:m.i18n.translate("xpack.upgradeAssistant.overview.apiCompatibilityNoteTitle",{defaultMessage:"Apply API compatibility headers (optional)"}),apiCompatibilityNoteBody:e=>Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.apiCompatibilityNoteBody",defaultMessage:"We recommend you resolve all deprecation issues before upgrading to the next major version of Elastic. If needed, you can apply API compatibility headers to requests that use deprecated features. {learnMoreLink}.",values:{learnMoreLink:Object(p.jsx)(l.EuiLink,{href:e,target:"_blank"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.apiCompatibilityNoteLink",defaultMessage:"Learn more"}))}}),onlyLogWritingEnabledTitle:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deprecationWarningTitle",{defaultMessage:"Your logs are being written to the logs directory"}),onlyLogWritingEnabledBody:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deprecationWarningBody",{defaultMessage:"Go to your logs directory to view the deprecation logs or enable deprecation log collection to see them in Kibana."}),deniedPrivilegeTitle:m.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deniedPrivilegeTitle",{defaultMessage:"You require index privileges to analyze the deprecation logs"}),deniedPrivilegeDescription:e=>{var t,s;return Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.deprecationLogs.deniedPrivilegeDescription",defaultMessage:"The deprecation logs will continue to be indexed, but you won't be able to analyze them until you have the read index {privilegesCount, plural, one {privilege} other {privileges}} for: {missingPrivileges}",values:{missingPrivileges:Object(p.jsx)(l.EuiCode,{transparentBackground:!0},null==e||null===(t=e.index)||void 0===t?void 0:t.join(", ")),privilegesCount:null==e||null===(s=e.index)||void 0===s?void 0:s.length}})}},ht=({hasPrivileges:e,privilegesMissing:t})=>{const{services:{core:{docLinks:s}}}=j(),{isDeprecationLogIndexingEnabled:i,onlyDeprecationLogWritingEnabled:r,isLoading:o,isUpdating:c,fetchError:u,updateError:d,resendRequest:g,toggleLogging:x}=(()=>{const{services:{api:e,core:{notifications:t}}}=j(),{data:s,error:n,isLoading:i,resendRequest:r}=e.useLoadDeprecationLogging(),[o,l]=Object(a.useState)(!1),[c,u]=Object(a.useState)(!1),[d,p]=Object(a.useState)(!1),[g,x]=Object(a.useState)();return Object(a.useEffect)((()=>{if(!i&&s){const{isDeprecationLogIndexingEnabled:e,isDeprecationLoggingEnabled:t}=s;l(e),!e&&t&&p(!0)}}),[s,i]),{isDeprecationLogIndexingEnabled:o,isLoading:i,isUpdating:c,toggleLogging:async()=>{u(!0);const{data:s,error:a}=await e.updateDeprecationLogging({isEnabled:!o});u(!1),p(!1),a?x(a):s&&(l(s.isDeprecationLogIndexingEnabled),t.toasts.addSuccess(s.isDeprecationLogIndexingEnabled?pt.enabledMessage:pt.disabledMessage))},fetchError:n,updateError:g,resendRequest:r,onlyDeprecationLogWritingEnabled:d}})(),[b,f]=Object(a.useState)((()=>{const e=ct()(ft.get(bt));if(e.isValid())return e.toISOString();const t=ct()().toISOString();return ft.set(bt,t),t})());return Object(a.useEffect)((()=>{var e;e=b,ft.set(bt,e)}),[b]),Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(jt,{isDeprecationLogIndexingEnabled:i,isLoading:o,isUpdating:c,fetchError:u,updateError:d,resendRequest:g,toggleLogging:x}),r&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(l.EuiCallOut,{title:mt.onlyLogWritingEnabledTitle,color:"warning",iconType:"help","data-test-subj":"deprecationWarningCallout"},Object(p.jsx)("p",null,mt.onlyLogWritingEnabledBody))),!e&&i&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(l.EuiCallOut,{iconType:"help",color:"warning",title:mt.deniedPrivilegeTitle,"data-test-subj":"noIndexPermissionsCallout"},Object(p.jsx)("p",null,mt.deniedPrivilegeDescription(t)))),e&&i&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiSpacer,{size:"xl"}),Object(p.jsx)(l.EuiText,{"data-test-subj":"externalLinksTitle"},Object(p.jsx)("h4",null,mt.analyzeTitle)),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(ot,{checkpoint:b}),Object(p.jsx)(l.EuiSpacer,{size:"xl"}),Object(p.jsx)(l.EuiText,{"data-test-subj":"deprecationsCountTitle"},Object(p.jsx)("h4",null,mt.deprecationsCountCheckpointTitle)),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(dt,{checkpoint:b,setCheckpoint:f}),Object(p.jsx)(l.EuiSpacer,{size:"xl"}),Object(p.jsx)(l.EuiText,{"data-test-subj":"apiCompatibilityNoteTitle"},Object(p.jsx)("h4",null,mt.apiCompatibilityNoteTitle)),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,mt.apiCompatibilityNoteBody(s.links.elasticsearch.apiCompatibilityHeader)))))},Ot=()=>Object(p.jsx)(d.f,{privileges:`index.${u.f}`},(({hasPrivileges:e,privilegesMissing:t,isLoading:s})=>Object(p.jsx)(ht,{hasPrivileges:!s&&e,privilegesMissing:t}))),vt=()=>{const{services:{breadcrumbs:e,core:{docLinks:t}}}=j();return Object(a.useEffect)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.LOADED,O.e)}),[]),Object(a.useEffect)((()=>{e.setBreadcrumbs("esDeprecationLogs")}),[e]),Object(p.jsx)(l.EuiPageBody,{restrictWidth:!0,"data-test-subj":"esDeprecationLogs"},Object(p.jsx)(l.EuiPageContentBody,{color:"transparent",paddingSize:"none"},Object(p.jsx)(l.EuiPageHeader,{bottomBorder:!0,pageTitle:m.i18n.translate("xpack.upgradeAssistant.esDeprecationLogs.pageTitle",{defaultMessage:"Elasticsearch deprecation logs"}),description:m.i18n.translate("xpack.upgradeAssistant.esDeprecationLogs.pageDescription",{defaultMessage:"Review the deprecation logs to determine if you're using any deprecated APIs. If so, update your applications before upgrading to the next major version."}),rightSideItems:[Object(p.jsx)(l.EuiButtonEmpty,{href:t.links.elasticsearch.migrationApiDeprecation,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecationLogs.documentationLinkText",defaultMessage:"Documentation"}))]}),Object(p.jsx)(l.EuiSpacer,{size:"l"}),Object(p.jsx)(Ot,null)))},Et=()=>{const{kibanaVersionInfo:e,services:{core:{docLinks:t}}}=j(),{nextMajor:s,currentMajor:a}=e,{ELASTIC_WEBSITE_URL:i}=t;return Object(p.jsx)(l.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(p.jsx)(l.EuiEmptyPrompt,{iconType:"wrench","data-test-subj":"comingSoonPrompt",title:Object(p.jsx)("h2",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.title",defaultMessage:"{uaVersion} Upgrade Assistant",values:{uaVersion:`${s}.0`}})),body:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.upgradeAssistantDescription",defaultMessage:"The Upgrade Assistant identifies deprecated settings in your cluster and helps you resolve issues before you upgrade. Check back here when it's time to upgrade to Elastic {nextMajor}.",values:{nextMajor:`${s}.0`}})),7===a&&Object(p.jsx)("p",null,Object(p.jsx)(l.EuiLink,{external:!0,target:"_blank",href:`${i}guide/en/elasticsearch/reference/master/migrating-8.0.html`},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.learnMoreDescription",defaultMessage:"Learn more about migrating to {nextMajor}.",values:{nextMajor:`${s}.0`}}))))}))},kt=()=>{var e;const{plugins:{share:t}}=j(),s=null===(e=t.url.locators.get("SNAPSHOT_RESTORE_LOCATOR"))||void 0===e?void 0:e.useUrl({page:"snapshots"});return Object(p.jsx)(l.EuiButton,{href:s,onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.b)},"data-test-subj":"snapshotRestoreLink"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.snapshotRestoreLink",defaultMessage:"Create snapshot"}))},yt=()=>Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,m.i18n.translate("xpack.upgradeAssistant.overview.backupStepDescription",{defaultMessage:"Make sure you have a current snapshot before making any changes."}))),Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(kt,null)),St=({cloudSnapshotsUrl:e,setIsComplete:t,setForceOnPremStep:s})=>{const{services:{api:i}}=j(),{isInitialRequest:r,isLoading:c,error:d,data:g,resendRequest:x}=i.useLoadCloudBackupStatus();if(Object(a.useEffect)((()=>{var e;c||(t(null!==(e=!d&&(null==g?void 0:g.isBackedUp))&&void 0!==e&&e),d&&(e=>404===e.statusCode&&e.message.toString().includes(u.c))(d)&&s(!0))}),[d,c,g,s]),r&&c)return Object(p.jsx)(l.EuiLoadingContent,{"data-test-subj":"cloudBackupLoading",lines:3});if(d)return Object(p.jsx)(l.EuiCallOut,{title:m.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.loadingError",{defaultMessage:"An error occurred while retrieving the latest snapshot status"}),color:"danger",iconType:"alert","data-test-subj":"cloudBackupErrorCallout"},Object(p.jsx)("p",null,d.statusCode," - ",d.message),Object(p.jsx)(l.EuiButton,{color:"danger",onClick:x,"data-test-subj":"cloudBackupRetryButton"},m.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.retryButton",{defaultMessage:"Try again"})));const b=ct()(g.lastBackupTime).toISOString(),f=g.isBackedUp?Object(p.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s","data-test-subj":"dataBackedUpStatus"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check",color:"success"})),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.cloudBackup.hasSnapshotMessage",defaultMessage:"Last snapshot created on {lastBackupTime}.",values:{lastBackupTime:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.FormattedDate,{value:b,year:"numeric",month:"long",day:"2-digit"})," ",Object(p.jsx)(o.FormattedTime,{value:b,timeZoneName:"short",hour12:!1}))}}))))):Object(p.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s","data-test-subj":"dataNotBackedUpStatus"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,m.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.noSnapshotMessage",{defaultMessage:"Your data isn't backed up."})))));return Object(p.jsx)(n.a.Fragment,null,f,Object(p.jsx)(l.EuiSpacer,{size:"s"}),Object(p.jsx)(l.EuiButton,{href:e,onClick:()=>{O.r.trackUiMetric(h.METRIC_TYPE.CLICK,O.a)},"data-test-subj":"cloudSnapshotsLink",target:"_blank",iconType:"popout",iconSide:"right"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.cloudBackup.snapshotsLink",defaultMessage:"Create snapshot"})))},Tt=m.i18n.translate("xpack.upgradeAssistant.overview.backupStepTitle",{defaultMessage:"Back up your data"}),Ct=({cloud:e,setIsComplete:t})=>{const[s,n]=Object(a.useState)(!1);return null!=e&&e.isCloudEnabled&&!s?Object(p.jsx)(St,{setIsComplete:t,cloudSnapshotsUrl:e.snapshotsUrl,setForceOnPremStep:n}):Object(p.jsx)(yt,null)},Lt=({cloud:e,isComplete:t,setIsComplete:s})=>{const a=null!=e&&e.isCloudEnabled&&t?"complete":"incomplete";return{title:Tt,status:a,"data-test-subj":`backupStep-${a}`,children:Object(p.jsx)(Ct,{cloud:e,setIsComplete:s})}},Mt=({children:e})=>Object(p.jsx)(l.EuiText,{color:"subdued","data-test-subj":"loadingIssuesError"},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"alert",color:"danger"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1},e))),wt={noPartialDeprecationIssuesText:m.i18n.translate("xpack.upgradeAssistant.noPartialDeprecationsMessage",{defaultMessage:"None"}),noDeprecationIssuesText:m.i18n.translate("xpack.upgradeAssistant.noDeprecationsMessage",{defaultMessage:"No issues"})},Ft=e=>{const{isPartial:t=!1}=e;return Object(p.jsx)(l.EuiText,{color:"success"},Object(p.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(p.jsx)(l.EuiFlexItem,{grow:!1},Object(p.jsx)(l.EuiIcon,{type:"check"})),Object(p.jsx)(l.EuiFlexItem,{grow:!1,"data-test-subj":e["data-test-subj"]},t?wt.noPartialDeprecationIssuesText:wt.noDeprecationIssuesText)))};s(71);const It={warningDeprecationsTitle:m.i18n.translate("xpack.upgradeAssistant.deprecationStats.warningDeprecationsTitle",{defaultMessage:"Warning"}),criticalDeprecationsTitle:m.i18n.translate("xpack.upgradeAssistant.deprecationStats.criticalDeprecationsTitle",{defaultMessage:"Critical"})},Dt=e=>{const{deprecationSource:t,linkUrl:s,criticalDeprecationsCount:n,warningDeprecationsCount:i,isLoading:o,errorMessage:c,setIsFixed:u}=e,g=Object(r.useHistory)(),x=!!c,j=n>0,b=i>0,f=!(o||x||b||j);return Object(a.useEffect)((()=>{o||c||u(0===n)}),[u,n,o,c]),Object(p.jsx)(l.EuiCard,Le()({"data-test-subj":e["data-test-subj"],className:"upgDeprecationIssuesPanel",layout:"horizontal",title:t,titleSize:"xs"},!f&&Object(d.g)(g,s)),Object(p.jsx)(l.EuiSpacer,{size:"s"}),x?Object(p.jsx)(Mt,null,c):f?Object(p.jsx)(Ft,{"data-test-subj":"noDeprecationIssues"}):Object(p.jsx)(l.EuiFlexGroup,null,Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiStat,{"data-test-subj":"criticalDeprecations",className:"upgDeprecationIssuesPanel__stat",title:x?"--":j?fe(n):Object(p.jsx)(Ft,{isPartial:!0,"data-test-subj":"noCriticalDeprecationIssues"}),titleElement:"span",description:It.criticalDeprecationsTitle,titleColor:"danger",isLoading:o})),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(l.EuiStat,{"data-test-subj":"warningDeprecations",className:"upgDeprecationIssuesPanel__stat",title:x?"--":b?fe(i):Object(p.jsx)(Ft,{isPartial:!0,"data-test-subj":"noWarningDeprecationIssues"}),titleElement:"span",description:It.warningDeprecationsTitle,isLoading:o}))))},At=({setIsFixed:e})=>{var t,s,a,n,i,r;const{services:{api:o}}=j(),{data:l,isLoading:c,error:u}=o.useLoadEsDeprecations(),d=null!==(t=null==l||null===(s=l.deprecations)||void 0===s||null===(a=s.filter((e=>e.isCritical)))||void 0===a?void 0:a.length)&&void 0!==t?t:0,g=null!==(n=null==l||null===(i=l.deprecations)||void 0===i||null===(r=i.filter((e=>!1===e.isCritical)))||void 0===r?void 0:r.length)&&void 0!==n?n:0,x=u&&K(u).message;return Object(p.jsx)(Dt,{"data-test-subj":"esStatsPanel",deprecationSource:"Elasticsearch",linkUrl:"/es_deprecations",criticalDeprecationsCount:d,warningDeprecationsCount:g,isLoading:c,errorMessage:x,setIsFixed:e})},_t=({setIsFixed:e})=>{var t,s,n,i;const{services:{core:{deprecations:r}}}=j(),[o,l]=Object(a.useState)(void 0),[c,u]=Object(a.useState)(!1),[d,g]=Object(a.useState)(void 0);Object(a.useEffect)((()=>{!async function(){u(!0);try{const e=await r.getAllDeprecations();l(e)}catch(e){g(e)}u(!1)}()}),[r]);const x=null!==(t=null==o||null===(s=o.filter((e=>"critical"===e.level)))||void 0===s?void 0:s.length)&&void 0!==t?t:0,b=null!==(n=null==o||null===(i=o.filter((e=>"warning"===e.level)))||void 0===i?void 0:i.length)&&void 0!==n?n:0,f=d&&m.i18n.translate("xpack.upgradeAssistant.deprecationStats.loadingErrorMessage",{defaultMessage:"Could not retrieve Kibana deprecation issues."});return Object(p.jsx)(Dt,{"data-test-subj":"kibanaStatsPanel",deprecationSource:"Kibana",linkUrl:"/kibana_deprecations",criticalDeprecationsCount:x,warningDeprecationsCount:b,isLoading:c,errorMessage:f,setIsFixed:e})},Pt={reviewStepTitle:m.i18n.translate("xpack.upgradeAssistant.overview.fixIssuesStepTitle",{defaultMessage:"Review deprecated settings and resolve issues"})},Rt=({setIsComplete:e})=>{const[t,s]=Object(a.useState)(!1),[n,i]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{e(t&&n)}),[t,n]),Object(p.jsx)(l.EuiFlexGroup,null,Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(At,{setIsFixed:s})),Object(p.jsx)(l.EuiFlexItem,null,Object(p.jsx)(_t,{setIsFixed:i})))},Bt=({navigateToEsDeprecationLogs:e})=>Object(p.jsx)(d.f,{privileges:`index.${u.f}`},(({hasPrivileges:t,isLoading:s})=>s||!t?null:Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.accessEsDeprecationLogsLabel",defaultMessage:"If you have application code that calls Elasticsearch APIs, review the {esDeprecationLogsLink} to make sure you are not using deprecated APIs.",values:{esDeprecationLogsLink:Object(p.jsx)(l.EuiLink,{onClick:e,"data-test-subj":"viewElasticsearchDeprecationLogs"},m.i18n.translate("xpack.upgradeAssistant.overview.esDeprecationLogsLink",{defaultMessage:"Elasticsearch deprecation logs"}))}}))),zt=({isComplete:e,setIsComplete:t,navigateToEsDeprecationLogs:s})=>{const a=e?"complete":"incomplete";return{title:Pt.reviewStepTitle,status:a,"data-test-subj":`fixIssuesStep-${a}`,children:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.fixIssuesStepDescription",defaultMessage:"Resolve any critical Elasticsearch and Kibana configuration issues before upgrading to the next major version of Elastic. Ignoring warnings might result in unexpected behavior. {accessDeprecationLogsMessage}",values:{accessDeprecationLogsMessage:Object(p.jsx)(Bt,{navigateToEsDeprecationLogs:s})}}))),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(Rt,{setIsComplete:t}))}},Ut={upgradeStepTitle:m.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepTitle",{defaultMessage:"Check back here when it's time to upgrade to 8.x"}),upgradeStepDescription:m.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepDescription",{defaultMessage:"If you've resolved all critical issues and checked your deprecation logs, you're ready for the next major version of Elastic. Check this page again before upgrading to Elastic 8.x."})},Nt=Object(r.withRouter)((({history:e})=>{const{services:{breadcrumbs:t,core:{docLinks:s}},plugins:{cloud:i}}=j();Object(a.useEffect)((()=>{O.r.trackUiMetric(h.METRIC_TYPE.LOADED,O.l)}),[]),Object(a.useEffect)((()=>{t.setBreadcrumbs("overview")}),[t]);const[r,c]=Object(a.useState)({backup:!1,fix_issues:!1}),u=e=>r[e],d=(e,t)=>{c({...r,[e]:t})};return Object(p.jsx)(l.EuiPageBody,{restrictWidth:!0,"data-test-subj":"overview"},Object(p.jsx)(l.EuiPageContentBody,{color:"transparent",paddingSize:"none"},Object(p.jsx)(l.EuiPageHeader,{bottomBorder:!0,pageTitle:m.i18n.translate("xpack.upgradeAssistant.overview.pageTitle",{defaultMessage:"Upgrade Assistant"}),description:m.i18n.translate("xpack.upgradeAssistant.overview.pageDescription",{defaultMessage:"Get ready for the next major version of Elastic!"}),rightSideItems:[Object(p.jsx)(l.EuiButtonEmpty,{href:s.links.upgradeAssistant.overview,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.documentationLinkText",defaultMessage:"Documentation"}))]},Object(p.jsx)(l.EuiText,{"data-test-subj":"whatsNewLink"},Object(p.jsx)(l.EuiLink,{href:s.links.elasticsearch.version8ReleaseHighlights,target:"_blank"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.overview.whatsNewLink",defaultMessage:"What's new in 8.x?"})))),Object(p.jsx)(l.EuiSpacer,{size:"l"}),Object(p.jsx)(l.EuiSteps,{steps:[Lt({cloud:i,isComplete:u("backup"),setIsComplete:d.bind(null,"backup")}),zt({isComplete:u("fix_issues"),setIsComplete:d.bind(null,"fix_issues"),navigateToEsDeprecationLogs:()=>e.push("/es_deprecation_logs")}),{title:Ut.upgradeStepTitle,status:"incomplete","data-test-subj":"upgradeStep",children:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(l.EuiText,null,Object(p.jsx)("p",null,Ut.upgradeStepDescription)),Object(p.jsx)(l.EuiSpacer,{size:"m"}))}]})))})),{GlobalFlyoutProvider:Wt}=d.c,qt=()=>{const{isReadOnlyMode:e,services:{api:t}}=j(),[s,n]=Object(a.useState)("isPreparingForUpgrade");return Object(a.useEffect)((()=>{t.onClusterUpgradeStateChange((e=>{n(e)}))}),[t]),e?Object(p.jsx)(Et,null):"isUpgrading"===s?Object(p.jsx)(l.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center","data-test-subj":"isUpgradingMessage"},Object(p.jsx)(l.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:Object(p.jsx)("h1",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.upgradingTitle",defaultMessage:"Your cluster is upgrading"})),body:Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.upgradingDescription",defaultMessage:"One or more Elasticsearch nodes have a newer version of Elasticsearch than Kibana. Once all your nodes are upgraded, upgrade Kibana."})),"data-test-subj":"emptyPrompt"})):"isUpgradeComplete"===s?Object(p.jsx)(l.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center","data-test-subj":"isUpgradeCompleteMessage"},Object(p.jsx)(l.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:Object(p.jsx)("h1",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.upgradedTitle",defaultMessage:"Your cluster has been upgraded"})),body:Object(p.jsx)("p",null,Object(p.jsx)(o.FormattedMessage,{id:"xpack.upgradeAssistant.upgradedDescription",defaultMessage:"All Elasticsearch nodes have been upgraded. You may now upgrade Kibana."})),"data-test-subj":"emptyPrompt"})):Object(p.jsx)(r.Switch,null,Object(p.jsx)(r.Route,{exact:!0,path:"/overview",component:Nt}),Object(p.jsx)(r.Route,{exact:!0,path:"/es_deprecations",component:at}),Object(p.jsx)(r.Route,{exact:!0,path:"/es_deprecation_logs",component:vt}),Object(p.jsx)(r.Route,{exact:!0,path:"/kibana_deprecations",component:q}),Object(p.jsx)(r.Redirect,{from:"/",to:"/overview"}))},Gt=({history:e})=>{const{services:{api:t}}=j(),{isLoading:s,isInitialRequest:a}=t.useLoadClusterUpgradeStatus();return s&&a?Object(p.jsx)(l.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center"},Object(p.jsx)(l.EuiEmptyPrompt,{body:Object(p.jsx)(l.EuiLoadingSpinner,{size:"l"})})):Object(p.jsx)(r.Router,{history:e},Object(p.jsx)(qt,null))},Kt=e=>{const{history:t,core:{i18n:s,application:a,http:n}}=e.services;return Object(p.jsx)(c.RedirectAppLinks,{application:a,className:d.a},Object(p.jsx)(d.b,{httpClient:n,privilegesEndpoint:`${u.a}/privileges`},Object(p.jsx)(s.Context,null,Object(p.jsx)(x,{value:e},Object(p.jsx)(Wt,null,Object(p.jsx)(Gt,{history:t}))))))};var $t=s(10),Yt=s(13);function Vt(e,t){const{element:s,setBreadcrumbs:a}=e;return $t.a.setup(t.services.core.http),Yt.a.setup(a),Object(i.render)(Object(p.jsx)(Kt,t),s),()=>{Object(i.unmountComponentAtNode)(s)}}}])]);
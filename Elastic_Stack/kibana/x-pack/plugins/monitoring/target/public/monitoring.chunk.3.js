/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[3],{229:function(e,t,a){"use strict";a.r(t),a.d(t,"createCpuUsageAlertType",(function(){return u}));var r=a(35),s=a.n(r),n=(a(11),a(2)),l=a(42),i=a(38),o=a(12);function u(e){return{id:n.H,description:n.I[n.H].description,iconClass:"bell",documentationUrl:e=>`${e.links.monitoring.alertsKibanaCpuThreshold}`,alertParamsExpression:t=>Object(o.jsx)(i.a,s()({},t,{config:e,paramDetails:n.I[n.H].paramDetails})),validate:l.a,defaultActionMessage:"{{context.internalFullMessage}}",requiresAppContext:n.T}}},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r,s=a(11),n=a.n(s),l=a(0),i=a(13),o=a(12);function u(e=r.SECOND,t="0"){switch(e){case r.SECOND:return l.i18n.translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.secondLabel",{defaultMessage:"{timeValue, plural, one {second} other {seconds}}",values:{timeValue:t}});case r.MINUTE:return l.i18n.translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.minuteLabel",{defaultMessage:"{timeValue, plural, one {minute} other {minutes}}",values:{timeValue:t}});case r.HOUR:return l.i18n.translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.hourLabel",{defaultMessage:"{timeValue, plural, one {hour} other {hours}}",values:{timeValue:t}});case r.DAY:return l.i18n.translate("xpack.monitoring.alerts.flyoutExpressions.timeUnits.dayLabel",{defaultMessage:"{timeValue, plural, one {day} other {days}}",values:{timeValue:t}})}}!function(e){e.SECOND="s",e.MINUTE="m",e.HOUR="h",e.DAY="d"}(r||(r={}));const c=/(\d+)([smhd]{1})/,d=e=>{const{name:t,label:a,setAlertParams:s,errors:l}=e,d=c.exec(e.duration),m=d&&d[1]?parseInt(d[1],10):1,b=d&&d[2]?d[2]:r.MINUTE,[p,j]=n.a.useState(m),[x,g]=n.a.useState(b),v=Object.values(r).map((e=>({value:e,text:u(e)})));return n.a.useEffect((()=>{s(t,`${p}${x}`)}),[x,p]),Object(o.jsx)(i.EuiFormRow,{label:a,error:l,isInvalid:(null==l?void 0:l.length)>0},Object(o.jsx)(i.EuiFlexGroup,null,Object(o.jsx)(i.EuiFlexItem,{grow:2},Object(o.jsx)(i.EuiFieldNumber,{compressed:!0,value:p,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)&&(t=0),j(t)}})),Object(o.jsx)(i.EuiFlexItem,{grow:4},Object(o.jsx)(i.EuiSelect,{compressed:!0,value:x,onChange:e=>g(e.target.value),options:v}))))}},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(11),s=a.n(r),n=a(13),l=a(12);const i=e=>{const{name:t,label:a,setAlertParams:r,errors:i}=e,[o,u]=s.a.useState(e.percentage);return Object(l.jsx)(n.EuiFormRow,{label:a,error:i,isInvalid:i.length>0},Object(l.jsx)(n.EuiFieldNumber,{compressed:!0,value:o,append:Object(l.jsx)(n.EuiText,{size:"xs"},Object(l.jsx)("strong",null,"%")),onChange:e=>{let a=parseInt(e.target.value,10);isNaN(a)&&(a=0),u(a),r(t,a)}}))}},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var r=a(11),s=a(13),n=a(14),l=a(0),i=a(36),o=a(1),u=a(37),c=a(12);const d=e=>{const{name:t,details:a,setAlertParams:n,errors:l}=e,[i,o]=Object(r.useState)(e.value);return Object(c.jsx)(s.EuiFormRow,{label:a.label,error:l,isInvalid:(null==l?void 0:l.length)>0},Object(c.jsx)(s.EuiFieldNumber,{compressed:!0,value:i,append:a.append,onChange:e=>{let a=Number(e.target.value);isNaN(a)&&(a=0),o(a),n(t,a)}}))},m=e=>{const{name:t,label:a,setAlertParams:n,errors:l,placeholder:i}=e,[o,u]=Object(r.useState)(e.value);return Object(c.jsx)(s.EuiFormRow,{label:a,error:l,isInvalid:(null==l?void 0:l.length)>0},Object(c.jsx)(s.EuiFieldText,{compressed:!0,placeholder:i,value:o,onChange:e=>{const a=e.target.value;u(a),n(t,a)}}))};var b=a(41),p=a(40),j=a(39);const x=e=>{const{alertParams:t,paramDetails:a,setAlertParams:x,errors:g,config:v,data:f}=e,{derivedIndexPattern:O}=Object(b.a)(f,v),h=Object.keys(a).map((e=>{const r=a[e],s=t[e];switch(null==r?void 0:r.type){case o.b.Duration:return Object(c.jsx)(i.a,{key:e,name:e,duration:s,label:null==r?void 0:r.label,errors:g[e],setAlertParams:x});case o.b.Percentage:return Object(c.jsx)(u.a,{key:e,name:e,label:null==r?void 0:r.label,percentage:s,errors:g[e],setAlertParams:x});case o.b.Number:return Object(c.jsx)(d,{key:e,name:e,details:r,value:s,errors:g[e],setAlertParams:x});case o.b.TextField:return Object(c.jsx)(m,{key:e,name:e,label:null==r?void 0:r.label,value:s,errors:g[e],setAlertParams:x})}})),E=Object(r.useCallback)((e=>{x("filterQueryText",e),x("filterQuery",Object(j.a)(e,O)||"")}),[x,O]),N=Object(r.useCallback)(Object(n.debounce)(E,500),[E]);return Object(c.jsx)(r.Fragment,null,Object(c.jsx)(s.EuiForm,{component:"form"},h,Object(c.jsx)(s.EuiSpacer,null),Object(c.jsx)(s.EuiFormRow,{label:l.i18n.translate("xpack.monitoring.alerts.filterLable",{defaultMessage:"Filter"}),helpText:l.i18n.translate("xpack.monitoring.alerts.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."})},Object(c.jsx)(p.a,{value:t.filterQueryText,derivedIndexPattern:O,onSubmit:E,onChange:N})),Object(c.jsx)(s.EuiSpacer,null)))}},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(0);function s(e){const t={errors:{}},a={duration:[],threshold:[]};return e.duration||a.duration.push(r.i18n.translate("xpack.monitoring.alerts.validation.duration",{defaultMessage:"A valid duration is required."})),isNaN(e.threshold)&&a.threshold.push(r.i18n.translate("xpack.monitoring.alerts.validation.threshold",{defaultMessage:"A valid number is required."})),t.errors=a,t}}}]);